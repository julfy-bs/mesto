/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(t,e,r){return(e=i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(e){var r=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(r)?r:String(r)}var a=function(){function t(e){var r=e.headers,n=e.baseUrl;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._headers=r,this._baseUrl=n}var e,n;return e=t,n=[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject("".concat(t.statusText).concat(t.status))}},{key:"_request",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o="".concat(this._baseUrl,"/").concat(t);return fetch(o,r({headers:this._headers},n)).then((function(t){return e._checkResponse(t)}))}},{key:"getUser",value:function(){return this._request("users/me")}},{key:"getCards",value:function(){return this._request("cards")}},{key:"getAppData",value:function(){return Promise.all([this.getUser(),this.getCards()])}},{key:"updateUser",value:function(t){var e=t.name,r=t.about;return this._request("users/me",{method:"PATCH",body:JSON.stringify({name:e,about:r})})}},{key:"updateUserAvatar",value:function(t){return this._request("users/me/avatar",{method:"PATCH",body:JSON.stringify({avatar:t})})}},{key:"addCard",value:function(t){var e=t.name,r=t.link;return this._request("cards",{method:"POST",body:JSON.stringify({name:e,link:r})})}},{key:"removeCard",value:function(t){return this._request("cards/".concat(t),{method:"DELETE"})}},{key:"toggleLike",value:function(t,e){return this._request("cards/likes/".concat(t),{method:e?"DELETE":"PUT"})}}],n&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),u={baseUrl:"https://nomoreparties.co/v1/plus-cohort-19",headers:{authorization:"0f9e6763-ca59-4d6a-b788-b6c985602524","Content-Type":"application/json"}},c={inputSelector:".form__input",buttonSelector:".form__button",errorSelector:".form__error",inputErrorClass:"form__input_type_error",buttonDisabledClass:"form__button_type_disabled",errorActiveClass:"form__error_active"},s="loader_active",l="loader__skeleton",f="loader__skeleton_type_text",p="keydown",y="click",d=".profile__name",h=".profile__occupation",v=".profile__edit",m=".profile__add",b=".profile__avatar",_="popup_active",g="error__item_active",w="#card",S="card__like-button_active",k="card__like-button_liked_true";function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function L(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}var P=function(){function t(e,r,n){var o=L(r).slice(0),i=L(n).slice(0);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._loader=document.querySelector(e),this._textElements=document.querySelectorAll(o),this._imageElements=document.querySelectorAll(i)}var e,r;return e=t,(r=[{key:"_showSpinner",value:function(){this._loader.classList.add(s)}},{key:"_hideSpinner",value:function(){this._loader.classList.remove(s)}},{key:"_addImageEffect",value:function(){this._imageElements.forEach((function(t){t.classList.add(l)}))}},{key:"_removeImageEffect",value:function(){this._imageElements.forEach((function(t){t.classList.remove(l)}))}},{key:"_addTextEffect",value:function(){this._textElements.forEach((function(t){t.classList.add(l),t.classList.add(f)}))}},{key:"_removeTextEffect",value:function(){this._textElements.forEach((function(t){t.classList.remove(l),t.classList.remove(f)}))}},{key:"startLoader",value:function(){this._addTextEffect(),this._addImageEffect(),this._showSpinner()}},{key:"endLoader",value:function(){this._removeTextEffect(),this._removeImageEffect(),this._hideSpinner()}}])&&j(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==C(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===C(o)?o:String(o)),n)}var o}var I=function(){function t(e){var r=e.nameSelector,n=e.occupationSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileNameElement=document.querySelector(r),this._profileAboutElement=document.querySelector(n),this._profileAvatarElement=document.querySelector(o)}var e,r;return e=t,(r=[{key:"setUserInfo",value:function(t){var e=t.name,r=t.about,n=t.avatar,o=t.id;e&&(this._profileNameElement.textContent=e),r&&(this._profileAboutElement.textContent=r),n&&(this._profileAvatarElement.src=n),o&&(this._userId=o)}}])&&x(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==A(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===A(o)?o:String(o)),n)}var o}var D=function(){function t(e){var r=e.renderer,n=e.containerSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,r;return e=t,(r=[{key:"render",value:function(t){var e=this;t.reverse().forEach((function(t){return e._renderer(t)}))}},{key:"prepend",value:function(t){this._container.prepend(t)}}])&&T(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===q(o)?o:String(o)),n)}var o}var N=function(){function t(e){var r=e.selector,n=e.card,o=n.name,i=n.link,a=n.owner,u=n.likes,c=n.id,s=e.userId,l=e.handleLikeBtnClick,f=e.handleDeleteBtnClick,p=e.handleImageClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._owner=a,this._likes=u,this._name=o,this._link=i,this._id=c,this._userId=s,this._handleLikeBtnClick=l,this._handleDeleteBtnClick=f,this._handleImageClick=p,this._cardTemplate=document.querySelector(r).content.querySelector(".feed__item"),this._cardItem=this._cardTemplate.cloneNode(!0),this._cardArticle=this._cardItem.querySelector(".card"),this._cardImage=this._cardArticle.querySelector(".card__image"),this._cardTitle=this._cardArticle.querySelector(".card__title"),this._cardLikeNumber=this._cardArticle.querySelector(".card__like-number"),this._cardLikeButton=this._cardArticle.querySelector(".card__like-button"),this._cardDelete=this._cardArticle.querySelector(".card__delete")}var e,r;return e=t,(r=[{key:"_setCardContent",value:function(){this._cardTitle.textContent=this._name,this._cardImage.setAttribute("src",this._link),this._cardImage.setAttribute("alt",this._name)}},{key:"toggleLike",value:function(t){this._likes=t.likes,this.updateOwnersLike(),this._setLikesQuantity(),this._toggleLikesClass()}},{key:"_setLikesQuantity",value:function(){0===this._likes.length?(this._cardLikeButton.classList.remove(k),this._cardLikeNumber.textContent=""):(this._cardLikeButton.classList.add(k),this._cardLikeNumber.textContent=this._likes.length)}},{key:"updateOwnersLike",value:function(){var t=this;return this._hasOwnerLike=this._likes.some((function(e){return e._id===t._userId})),this._likes.some((function(e){return e._id===t._userId}))}},{key:"getData",value:function(){return{name:this._name,link:this._link,owner:this._owner,likes:this._likes,id:this._id,hasOwnerLike:this._hasOwnerLike}}},{key:"remove",value:function(){this._cardItem.remove()}},{key:"generate",value:function(){return this._hasOwnerLike=this.updateOwnersLike(this._likes,this._userId),this._setCardContent(),this._setLikesQuantity(),this._toggleLikesClass(),this._setEventListeners(),this._cardItem}},{key:"_toggleLikesClass",value:function(){switch(this._hasOwnerLike){case!0:this._cardLikeButton.classList.add(S),this._cardLikeButton.setAttribute("aria-label",'Убрать отметку "Понравилось"');break;case!1:this._cardLikeButton.classList.remove(S),this._cardLikeButton.setAttribute("aria-label",'Добавить отметку "Понравилось"')}}},{key:"_setEventListeners",value:function(){var t=this;this._cardLikeButton.addEventListener(y,(function(){return t._handleLikeBtnClick(t)})),this._cardImage.addEventListener(y,(function(){return t._handleImageClick(t)})),this._owner._id===this._userId?this._cardDelete.addEventListener(y,this._handleDeleteBtnClick):this._cardDelete.remove()}}])&&B(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}var V=function(){function t(e,r){var n=r.inputSelector,o=r.buttonSelector,i=r.errorSelector,a=r.inputErrorClass,u=r.buttonDisabledClass,c=r.errorActiveClass;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._form=document.querySelector(e),this._inputSelector=n,this._buttonSelector=o,this._errorSelector=i,this._inputErrorClass=a,this._buttonDisabledClass=u,this._errorActiveClass=c}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t,e,r,n){r.textContent=n,r.classList.add(this._errorActiveClass),e.classList.add(this._inputErrorClass),e.setAttribute("aria-describedby","".concat(this._errorActiveClass))}},{key:"_hideInputError",value:function(t,e,r){r.classList.remove(this._errorActiveClass),r.textContent="",e.classList.remove(this._inputErrorClass),e.removeAttribute("aria-describedby")}},{key:"_checkInputValidity",value:function(t,e){var r=e.parentNode.querySelector(this._errorSelector);e.validity.patternMismatch?e.setCustomValidity(e.dataset.invalidMessage):e.setCustomValidity(""),e.validity.valid?this._hideInputError(t,e,r):this._showInputError(t,e,r,e.validationMessage)}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t,e){this._hasInvalidInput(t)?(e.classList.add(this._buttonDisabledClass),e.setAttribute("disabled","disabled")):(e.classList.remove(this._buttonDisabledClass),e.removeAttribute("disabled","disabled"))}},{key:"_setFormEventListeners",value:function(t){var e=this,r=Array.from(t.querySelectorAll(this._inputSelector)),n=t.querySelector(this._buttonSelector);this._toggleButtonState(r,n),r.forEach((function(o){o.addEventListener("input",(function(){e._checkInputValidity(t,o),e._toggleButtonState(r,n)}))})),t.addEventListener("reset",(function(){setTimeout((function(){return e._toggleButtonState(r,n)}),0)}))}},{key:"enableValidation",value:function(){this._setFormEventListeners(this._form,this._inputSelector,this._buttonSelector,this._errorSelector,this._inputErrorClass,this._buttonDisabledClass,this._errorActiveClass)}}])&&U(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function J(t){var e=function(t,e){if("object"!==F(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===F(e)?e:String(e)}var G=function(){function t(e){var r,n,o,i=this,a=e.code,u=e.body;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=function(t){i._removeErrorActiveClass(t),setTimeout((function(){return t.remove()}),500)},(n=J(n="_closeButtonListener"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._templateElement=document.querySelector("#error").content.querySelector(".error__item"),this._wrapperElement=document.querySelector(".error"),this.code=a,this.body=u}var e,r;return e=t,(r=[{key:"_addErrorActiveClass",value:function(t){t.classList.add(g),this._wrapperElement.classList.add("error_active")}},{key:"_removeErrorActiveClass",value:function(t){t.classList.remove(g),this._wrapperElement.classList.remove("error_active")}},{key:"createError",value:function(){var t=this,e=this._templateElement.cloneNode(!0),r=e.querySelector(".error__title"),n=e.querySelector(".error__description"),o=e.querySelector(".error__close");return this._addErrorActiveClass(e),o.addEventListener(y,(function(){return t._closeButtonListener(e)})),r.textContent="Код ".concat(this.code),n.textContent=this.body,setTimeout((function(){return t._closeButtonListener(e)}),5e3),e}}])&&H(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==M(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===M(o)?o:String(o)),n)}var o}var Q=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e)}var e,r;return e=t,(r=[{key:"_handleMouseEvent",value:function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close"))&&this.close()}},{key:"_handleKeyboardEvent",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){return t._handleMouseEvent(e)}))}},{key:"open",value:function(){var t=this;this._popup.classList.add(_),this._popup.addEventListener(p,(function(e){return t._handleKeyboardEvent(e)})),setTimeout((function(){return t._popup.focus()}),200)}},{key:"close",value:function(){this._popup.classList.remove(_),this._popup.removeEventListener(p,this._handleKeyboardEvent)}}])&&K(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===Y(o)?o:String(o)),n)}var o}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=W(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},z.apply(this,arguments)}function W(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t}function X(t,e){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},X(t,e)}function Z(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(n);if(o){var r=tt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return Z(this,t)});function a(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._image=document.querySelector(e),n._title=document.querySelector(r),n}return e=a,(r=[{key:"open",value:function(t){var e=t.name,r=t.link;z(tt(a.prototype),"open",this).call(this),this._image.src=r,this._image.alt=e,this._title.textContent=e}}])&&$(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Q);function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lt(n.key),n)}}function ot(){return ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=it(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ot.apply(this,arguments)}function it(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=st(t)););return t}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}function ut(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ct(t)}function ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}function lt(t){var e=function(t,e){if("object"!==rt(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===rt(e)?e:String(e)}var ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=st(n);if(o){var r=st(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return ut(this,t)});function a(t){var e,r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=ct(e=i.call(this,t)),o=void 0,(n=lt(n="_submitHandler"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e._form=document.querySelector(t).querySelector(".form"),e._submitter=e._form.querySelector(".form__button"),e._submitHandler=function(){},e}return e=a,r=[{key:"getInputValues",value:function(){var t=new FormData(this._form);return Object.fromEntries(t)}},{key:"fillInputs",value:function(t){var e=this;this._submitter.setAttribute("disabled","disabled"),this._submitter.classList.add("form__button_type_disabled"),Object.keys(t).forEach((function(r){return e._form.elements[r].value=t[r]}))}},{key:"updateSubmitHandler",value:function(t){this._submitHandler=t}},{key:"setEventListeners",value:function(){var t=this;ot(st(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitHandler()}))}},{key:"resetForm",value:function(){this._form.reset()}},{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};ot(st(a.prototype),"open",this).call(this),this._saveSessionData=t}},{key:"close",value:function(){ot(st(a.prototype),"close",this).call(this),this._submitHandler=function(){},this._saveSessionData()}}],r&&nt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(Q);function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dt(){dt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new L(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function y(){}function d(){}var h={};c(h,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(O([])));m&&m!==e&&r.call(m,i)&&(h=m);var b=d.prototype=p.prototype=Object.create(h);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(n,i,a,u){var c=l(t[n],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==pt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,u)}))}u(c.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,n(b,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:y,configurable:!0}),y.displayName=c(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),c(b,u,"Generator"),c(b,i,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ht(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function vt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ht(i,n,o,a,u,"next",t)}function u(t){ht(i,n,o,a,u,"throw",t)}a(void 0)}))}}document.addEventListener("DOMContentLoaded",(function(){var t=new a(u),e=new D({renderer:function(t){return g(t,e)},containerSelector:".error__list"});new V(".form_type_avatar",c).enableValidation(),new V(".form_type_edit",c).enableValidation(),new V(".form_type_add",c).enableValidation();var r=new et(".popup_type_photo",".popup__image",".popup__figcaption");r.setEventListeners();var n=new ft(".popup_type_delete");n.setEventListeners();var o=new ft(".popup_type_avatar");o.setEventListeners();var i=new ft(".popup_type_edit");i.setEventListeners();var s=new ft(".popup_type_add");s.setEventListeners();var l=function(){var e=vt(dt().mark((function e(r,n){var o,i,a,u;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=r.getData(),i=o.id,e.next=4,t.removeCard(i);case 4:r.remove(),n.close(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),a=r.getData(),u=a.name,new G({code:e.t0,body:"Произошла ошибка при попытке удалить карточку «".concat(u,"».")}).createError();case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=vt(dt().mark((function e(r){var n,o,i,a,u,c,s,l;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.getData(),o=n.id,i=n.hasOwnerLike,e.next=4,t.toggleLike(o,i);case 4:a=e.sent,r.toggleLike(a),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),u=r.getData(),c=u.name,s=u.hasOwnerLike,l=s?"снять":"добавить",new G({code:e.t0,body:"Произошла ошибка при попытке ".concat(l," лайк карточке «").concat(c,"».")}).createError();case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),p=function(t){n.open(),n.updateSubmitHandler((function(){return l(t,n)}))},_=function(t){var e=t.getData(),n=e.name,o=e.link;r.open({name:n,link:o})},g=function(t,e,r){var n=JSON.parse(sessionStorage.userData)._id,o=new N({selector:w,card:{id:t._id,likes:t.likes,link:t.link,name:t.name,owner:t.owner},userId:n,handleLikeBtnClick:function(){return f(o)},handleDeleteBtnClick:function(){return p(o)},handleImageClick:function(){return _(o)}}),i=o.generate();r.prepend(i)},S=function(t,e){t.setUserInfo({name:e.name,about:e.about,avatar:e.avatar,id:e._id})},k=function(t){var e=new D({renderer:function(r){return g(r,t,e)},containerSelector:".feed__list"});return e},E=function(){var e=vt(dt().mark((function e(r,n){var o,i,a,u;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=r.getInputValues(),i=o.link,e.next=4,t.updateUserAvatar(i);case 4:n.setUserInfo({avatar:i}),r.close(),r.resetForm(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),a=JSON.parse(sessionStorage.userData),u=a.name,new G({code:e.t0,body:"Произошла ошибка при попытке изменить изображение профиля пользователя «".concat(u,"».")}).createError();case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}(),L=function(t){o.open(),o.updateSubmitHandler((function(){return E(o,t)}))},O=function(){var e=vt(dt().mark((function e(r,n){var o,i,a,u,c,s;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=r.getInputValues(),i=o.name,a=o.occupation,e.next=4,t.updateUser({name:i,about:a});case 4:u=e.sent,n.setUserInfo({name:u.name,about:u.about}),r.close(),r.resetForm(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),c=JSON.parse(sessionStorage.userData),s=c.name,new G({code:e.t0,body:"Произошла ошибка при попытке изменить имя или описание профиля пользователя «".concat(s,"».")}).createError();case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,r){return e.apply(this,arguments)}}(),j=function(t){var e=JSON.parse(sessionStorage.userData),r=e.name,n=e.about;i.fillInputs({name:r,occupation:n}),i.updateSubmitHandler((function(){return O(i,t)})),i.open((function(){return function(t){var e=t.getInputValues(),r=e.name,n=e.occupation;sessionStorage.setItem("userData",JSON.stringify({name:r,about:n}))}(i)}))},C=function(){var e=vt(dt().mark((function e(r,n,o){var i,a,u,c,s,l,y,d,h,v;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=r.getInputValues(),a=i.title,u=i.link,c=JSON.parse(sessionStorage.userData),s=c._id,e.next=5,t.addCard({name:a,link:u});case 5:l=e.sent,y=new N({selector:w,card:{id:l._id,likes:l.likes,link:l.link,name:l.name,owner:l.owner},userId:s,handleLikeBtnClick:function(){return f(y)},handleDeleteBtnClick:function(){return p(y)},handleImageClick:function(){return _(y)}}),d=y.generate(),o.prepend(d),r.close(),r.resetForm(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),h=JSON.parse(sessionStorage.userData),v=h.name,new G({code:e.t0,body:"Произошла ошибка при создании новой карточки для профиля «".concat(v,"».")}).createError();case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n){return e.apply(this,arguments)}}(),x=function(t,e){s.open(),s.updateSubmitHandler(vt(dt().mark((function r(){return dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",C(s,t,e));case 1:case"end":return r.stop()}}),r)}))))},A=function(){var r=vt(dt().mark((function r(){var n,o,i,a,u,c,s;return dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(n=new P(".loader",[d,h],[b])).startLoader(),r.next=5,t.getAppData();case 5:o=r.sent,f=2,i=function(t){if(Array.isArray(t))return t}(l=o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){s=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(l,f)||function(t,e){if(t){if("string"==typeof t)return yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(t,e):void 0}}(l,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],u=i[1],sessionStorage.setItem("userData",JSON.stringify(a)),c=new I({nameSelector:d,occupationSelector:h,avatarSelector:".profile__image"}),S(c,a),(s=k(c)).render(u),[{selector:b,handleClick:function(){return L(c)}},{selector:v,handleClick:function(){return j(c)}},{selector:m,handleClick:function(){return x(c,s)}}].forEach((function(t){document.querySelector(t.selector).addEventListener(y,t.handleClick)})),n.endLoader(),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(0),p={code:r.t0,body:"Ошибка получения информации с сервера."},void 0,void 0,_=void 0,_=new G({code:p.code,body:p.body}),e.prepend(_.createError());case 21:case"end":return r.stop()}var l,f,p,_}),r,null,[[0,18]])})));return function(){return r.apply(this,arguments)}}();A()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBTSxFQUFGLEdBQUt4SSxLQUFNLCtDQW5IVndJLE9BQU14SSxFQUN4QjRJLFdBQVksSUFBSUwsRUFBTSxDQUFFQyxLQURGLEVBQUpBLEtBQ1l4SSxLQURGLEVBQUpBLE9BRTlCc0wsRUFBVXZILFFBQVE2RSxFQUFVd0QsZUFpSGtELDBDQW5INUQsRUFDWnhELENBa0h3RSx3QkFFL0Usa0JBNUJhLG1DQTZCZDZGLEdBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9lbnVtLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9Mb2FkZXIuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL1Byb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL1ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL0Vycm9yLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGhlYWRlcnMsIGJhc2VVcmwgfSkge1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgcmV0dXJuIChyZXMub2spID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGAke3Jlcy5zdGF0dXNUZXh0fSR7cmVzLnN0YXR1c31gKTtcbiAgfTtcblxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGNvbXB1dGVkVXJsID0gYCR7dGhpcy5fYmFzZVVybH0vJHt1cmx9YDtcbiAgICByZXR1cm4gZmV0Y2goY29tcHV0ZWRVcmwsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycywgLi4ub3B0aW9ucyB9KS50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpO1xuICB9XG5cbiAgZ2V0VXNlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgdXNlcnMvbWVgKTtcbiAgfVxuXG4gIGdldENhcmRzKCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGBjYXJkc2ApO1xuICB9XG5cbiAgZ2V0QXBwRGF0YSgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlcigpLCB0aGlzLmdldENhcmRzKCldKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXIoeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYHVzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dFxuICAgICAgfSlcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYHVzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pXG4gICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGNhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSlcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGNhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVMaWtlKGNhcmRJZCwgaGFzT3duZXJMaWtlKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYGNhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogaGFzT3duZXJMaWtlID8gJ0RFTEVURScgOiAnUFVUJyxcbiAgICB9KTtcbiAgfVxufVxuIiwiY29uc3QgYXBpQ29uZmlnID0ge1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL3BsdXMtY29ob3J0LTE5JyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICcwZjllNjc2My1jYTU5LTRkNmEtYjc4OC1iNmM5ODU2MDI1MjQnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH0sXG59O1xuXG5jb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgYnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fYnV0dG9uJyxcbiAgZXJyb3JTZWxlY3RvcjogJy5mb3JtX19lcnJvcicsXG4gIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxuICBidXR0b25EaXNhYmxlZENsYXNzOiAnZm9ybV9fYnV0dG9uX3R5cGVfZGlzYWJsZWQnLFxuICBlcnJvckFjdGl2ZUNsYXNzOiAnZm9ybV9fZXJyb3JfYWN0aXZlJ1xufTtcblxuY29uc3QgTE9BREVSID0ge1xuICBTRUxFQ1RPUjogJy5sb2FkZXInLFxuICBBQ1RJVkVfQ0xBU1M6ICdsb2FkZXJfYWN0aXZlJyxcbiAgU0tFTEVUT046ICdsb2FkZXJfX3NrZWxldG9uJyxcbiAgU0tFTEVUT05fVEVYVDogJ2xvYWRlcl9fc2tlbGV0b25fdHlwZV90ZXh0J1xufTtcblxuY29uc3QgS0VZID0ge1xuICBFU0NBUEU6ICdFc2NhcGUnXG59O1xuXG5jb25zdCBFVkVOVCA9IHtcbiAgU1VCTUlUOiAnc3VibWl0JyxcbiAgS0VZRE9XTjogJ2tleWRvd24nLFxuICBNT1VTRURPV046ICdtb3VzZWRvd24nLFxuICBNT1VTRVVQOiAnbW91c2V1cCcsXG4gIENMSUNLOiAnY2xpY2snXG59O1xuXG5jb25zdCBWQUxJREFUSU9OID0ge1xuICBGT1JNX1NFTEVDVE9SOiAnLmZvcm0nLFxuICBJTlBVVF9TRUxFQ1RPUjogJy5mb3JtX19pbnB1dCcsXG4gIElOUFVUX0VSUk9SX0NMQVNTOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG4gIEJVVFRPTl9TRUxFQ1RPUjogJy5mb3JtX19idXR0b24nLFxuICBCVVRUT05fRElTQUJMRURfQ0xBU1M6ICdmb3JtX19idXR0b25fdHlwZV9kaXNhYmxlZCcsXG4gIEVSUk9SX1NFTEVDVE9SOiAnLmZvcm1fX2Vycm9yJyxcbiAgRVJST1JfQUNUSVZFX0NMQVNTOiAnZm9ybV9fZXJyb3JfYWN0aXZlJ1xufTtcblxuY29uc3QgUFJPRklMRSA9IHtcbiAgQ09OVEVOVF9OQU1FOiAnLnByb2ZpbGVfX25hbWUnLFxuICBDT05URU5UX09DQ1VQQVRJT046ICcucHJvZmlsZV9fb2NjdXBhdGlvbicsXG4gIENPTlRFTlRfQVZBVEFSOiAnLnByb2ZpbGVfX2ltYWdlJyxcbiAgQlVUVE9OX0VESVRfUFJPRklMRTogJy5wcm9maWxlX19lZGl0JyxcbiAgQlVUVE9OX0FERF9DQVJEOiAnLnByb2ZpbGVfX2FkZCcsXG4gIEFWQVRBUjogJy5wcm9maWxlX19hdmF0YXInLFxufTtcblxuY29uc3QgUE9QVVAgPSB7XG4gIFNFTEVDVE9SOiAnLnBvcHVwJyxcbiAgQ0xBU1NOQU1FOiAncG9wdXAnLFxuICBDTE9TRV9DTEFTU05BTUU6ICdwb3B1cF9fY2xvc2UnLFxuICBBQ1RJVkVfQ0xBU1M6ICdwb3B1cF9hY3RpdmUnLFxuICBBTklNQVRJT05fRFVSQVRJT046IDIwMCxcbiAgVFlQRV9QUk9GSUxFOiAnLnBvcHVwX3R5cGVfZWRpdCcsXG4gIFRZUEVfQ0FSRDogJy5wb3B1cF90eXBlX2FkZCcsXG4gIFRZUEVfUEhPVE86ICcucG9wdXBfdHlwZV9waG90bycsXG4gIFRZUEVfQVZBVEFSOiAnLnBvcHVwX3R5cGVfYXZhdGFyJyxcbiAgVFlQRV9ERUxFVEU6ICcucG9wdXBfdHlwZV9kZWxldGUnLFxuICBJTUFHRTogJy5wb3B1cF9faW1hZ2UnLFxuICBUSVRMRTogJy5wb3B1cF9fZmlnY2FwdGlvbicsXG59O1xuXG5jb25zdCBFUlJPUiA9IHtcbiAgVEVNUExBVEU6ICcjZXJyb3InLFxuICBMSVNUOiAnLmVycm9yX19saXN0JyxcbiAgV1JBUFBFUjogJy5lcnJvcicsXG4gIFNFTEVDVE9SOiAnLmVycm9yX19pdGVtJyxcbiAgVElUTEU6ICcuZXJyb3JfX3RpdGxlJyxcbiAgREVTQ1JJUFRJT046ICcuZXJyb3JfX2Rlc2NyaXB0aW9uJyxcbiAgQlVUVE9OOiAnLmVycm9yX19jbG9zZScsXG4gIEFDVElWRV9DTEFTUzogJ2Vycm9yX19pdGVtX2FjdGl2ZScsXG5cbn07XG5cbmNvbnN0IEZPUk0gPSB7XG4gIFNFTEVDVE9SOiAnLmZvcm0nLFxuICBOQU1FX1BST0ZJTEU6ICdwcm9maWxlJyxcbiAgTkFNRV9DQVJEOiAnY2FyZCcsXG4gIE5BTUVfREVMRVRFOiAnZGVsZXRlJyxcbiAgTkFNRV9BVkFUQVI6ICdhdmF0YXInLFxuICBJTlBVVF9USVRMRTogJ1tuYW1lPVwidGl0bGVcIl0nLFxuICBJTlBVVF9MSU5LOiAnW25hbWU9XCJsaW5rXCJdJyxcbiAgSU5QVVRfTkFNRTogJ1tuYW1lPVwibmFtZVwiXScsXG4gIElOUFVUX09DQ1VQQVRJT046ICdbbmFtZT1cIm9jY3VwYXRpb25cIl0nLFxuICBCVVRUT05fVEVYVF9TQVZFOiAn0KHQvtGF0YDQsNC90LjRgtGMJyxcbiAgQlVUVE9OX1RFWFRfQ1JFQVRFOiAn0KHQvtC30LTQsNGC0YwnLFxuICBCVVRUT05fVEVYVF9DUkVBVElORzogJ9Ch0L7Qt9C00LDQvdC40LUuLi4nLFxuICBCVVRUT05fVEVYVF9TQVZJTkc6ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicsXG4gIEJVVFRPTl9URVhUX0RFTEVURTogJ9CU0LAnLFxuICBCVVRUT05fVEVYVF9ERUxFVElORzogJ9Cj0LTQsNC70LXQvdC40LUuLi4nLFxufTtcblxuY29uc3QgQ0FSRCA9IHtcbiAgV1JBUFBFUjogJy5mZWVkX19saXN0JyxcbiAgVEVNUExBVEU6ICcjY2FyZCcsXG4gIElURU06ICcuZmVlZF9faXRlbScsXG4gIElURU1fQ0xBU1NOQU1FOiAnZmVlZF9faXRlbScsXG4gIEFSVElDTEU6ICcuY2FyZCcsXG4gIElNQUdFOiAnLmNhcmRfX2ltYWdlJyxcbiAgVElUTEU6ICcuY2FyZF9fdGl0bGUnLFxuICBMSUtFX0JVVFRPTjogJy5jYXJkX19saWtlLWJ1dHRvbicsXG4gIExJS0VfTlVNQkVSOiAnLmNhcmRfX2xpa2UtbnVtYmVyJyxcbiAgTElLRV9CVVRUT05fQUNUSVZFOiAnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyxcbiAgTElLRV9CVVRUT05fSVNfTElLRUQ6ICdjYXJkX19saWtlLWJ1dHRvbl9saWtlZF90cnVlJyxcbiAgREVMRVRFOiAnLmNhcmRfX2RlbGV0ZSdcbn07XG5cbmV4cG9ydCB7XG4gIENBUkQsXG4gIEVSUk9SLFxuICBFVkVOVCxcbiAgS0VZLFxuICBGT1JNLFxuICBQT1BVUCxcbiAgUFJPRklMRSxcbiAgTE9BREVSLFxuICBWQUxJREFUSU9OLFxuICBhcGlDb25maWcsXG4gIHZhbGlkYXRpb25Db25maWdcbn07XG4iLCJpbXBvcnQgeyBMT0FERVIgfSBmcm9tICcuL2VudW0uanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkZXIge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgWy4uLnRleHRFbGVtZW50c10sIFsuLi5pbWFnZUVsZW1lbnRzXSkge1xuICAgIHRoaXMuX2xvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIHRoaXMuX3RleHRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGV4dEVsZW1lbnRzKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpbWFnZUVsZW1lbnRzKTtcbiAgfVxuXG4gIF9zaG93U3Bpbm5lcigpIHtcbiAgICB0aGlzLl9sb2FkZXIuY2xhc3NMaXN0LmFkZChMT0FERVIuQUNUSVZFX0NMQVNTKTtcbiAgfVxuXG4gIF9oaWRlU3Bpbm5lcigpIHtcbiAgICB0aGlzLl9sb2FkZXIuY2xhc3NMaXN0LnJlbW92ZShMT0FERVIuQUNUSVZFX0NMQVNTKTtcbiAgfVxuXG4gIF9hZGRJbWFnZUVmZmVjdCgpIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoTE9BREVSLlNLRUxFVE9OKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9yZW1vdmVJbWFnZUVmZmVjdCgpIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoTE9BREVSLlNLRUxFVE9OKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9hZGRUZXh0RWZmZWN0KCkge1xuICAgIHRoaXMuX3RleHRFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKExPQURFUi5TS0VMRVRPTik7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoTE9BREVSLlNLRUxFVE9OX1RFWFQpO1xuICAgIH0pO1xuICB9XG5cbiAgX3JlbW92ZVRleHRFZmZlY3QoKSB7XG4gICAgdGhpcy5fdGV4dEVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoTE9BREVSLlNLRUxFVE9OKTtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShMT0FERVIuU0tFTEVUT05fVEVYVCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGFydExvYWRlcigpIHtcbiAgICB0aGlzLl9hZGRUZXh0RWZmZWN0KCk7XG4gICAgdGhpcy5fYWRkSW1hZ2VFZmZlY3QoKTtcbiAgICB0aGlzLl9zaG93U3Bpbm5lcigpO1xuICB9XG5cbiAgZW5kTG9hZGVyKCkge1xuICAgIHRoaXMuX3JlbW92ZVRleHRFZmZlY3QoKTtcbiAgICB0aGlzLl9yZW1vdmVJbWFnZUVmZmVjdCgpO1xuICAgIHRoaXMuX2hpZGVTcGlubmVyKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGUge1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICAgICAgbmFtZVNlbGVjdG9yLFxuICAgICAgICAgICAgICAgIG9jY3VwYXRpb25TZWxlY3RvcixcbiAgICAgICAgICAgICAgICBhdmF0YXJTZWxlY3RvcixcbiAgICAgICAgICAgICAgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9wcm9maWxlQWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvY2N1cGF0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBzZXRVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgaWQgfSA9IHVzZXJEYXRhO1xuICAgIGlmIChuYW1lKSB0aGlzLl9wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIGlmIChhYm91dCkgdGhpcy5fcHJvZmlsZUFib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIGlmIChhdmF0YXIpIHRoaXMuX3Byb2ZpbGVBdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcbiAgICBpZiAoaWQpIHRoaXMuX3VzZXJJZCA9IGlkO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXIoaXRlbXMpIHtcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgcHJlcGVuZChlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IENBUkQsIEVWRU5UIH0gZnJvbSAnLi9lbnVtLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHtcbiAgICAgIHNlbGVjdG9yLFxuICAgICAgY2FyZDogeyBuYW1lLCBsaW5rLCBvd25lciwgbGlrZXMsIGlkIH0sXG4gICAgICB1c2VySWQsXG4gICAgICBoYW5kbGVMaWtlQnRuQ2xpY2ssXG4gICAgICBoYW5kbGVEZWxldGVCdG5DbGljayxcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2tcbiAgICB9XG4gICkge1xuICAgIHRoaXMuX293bmVyID0gb3duZXI7XG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9pZCA9IGlkO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnRuQ2xpY2sgPSBoYW5kbGVMaWtlQnRuQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnRuQ2xpY2sgPSBoYW5kbGVEZWxldGVCdG5DbGljaztcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoQ0FSRC5JVEVNKTtcbiAgICB0aGlzLl9jYXJkSXRlbSA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZEFydGljbGUgPSB0aGlzLl9jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKENBUkQuQVJUSUNMRSk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEFydGljbGUucXVlcnlTZWxlY3RvcihDQVJELklNQUdFKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkQXJ0aWNsZS5xdWVyeVNlbGVjdG9yKENBUkQuVElUTEUpO1xuICAgIHRoaXMuX2NhcmRMaWtlTnVtYmVyID0gdGhpcy5fY2FyZEFydGljbGUucXVlcnlTZWxlY3RvcihDQVJELkxJS0VfTlVNQkVSKTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRBcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoQ0FSRC5MSUtFX0JVVFRPTik7XG4gICAgdGhpcy5fY2FyZERlbGV0ZSA9IHRoaXMuX2NhcmRBcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoQ0FSRC5ERUxFVEUpO1xuICB9XG5cbiAgX3NldENhcmRDb250ZW50KCkge1xuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fbGluayk7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgdGhpcy5fbmFtZSk7XG4gIH1cblxuICB0b2dnbGVMaWtlKGNhcmQpIHtcbiAgICB0aGlzLl9saWtlcyA9IGNhcmQubGlrZXM7XG4gICAgdGhpcy51cGRhdGVPd25lcnNMaWtlKCk7XG4gICAgdGhpcy5fc2V0TGlrZXNRdWFudGl0eSgpO1xuICAgIHRoaXMuX3RvZ2dsZUxpa2VzQ2xhc3MoKTtcbiAgfTtcblxuICBfc2V0TGlrZXNRdWFudGl0eSgpIHtcbiAgICBzd2l0Y2ggKHRoaXMuX2xpa2VzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKENBUkQuTElLRV9CVVRUT05fSVNfTElLRUQpO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZU51bWJlci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoQ0FSRC5MSUtFX0JVVFRPTl9JU19MSUtFRCk7XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlTnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgdXBkYXRlT3duZXJzTGlrZSgpIHtcbiAgICB0aGlzLl9oYXNPd25lckxpa2UgPSB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XG4gIH07XG5cbiAgZ2V0RGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgICBvd25lcjogdGhpcy5fb3duZXIsXG4gICAgICBsaWtlczogdGhpcy5fbGlrZXMsXG4gICAgICBpZDogdGhpcy5faWQsXG4gICAgICBoYXNPd25lckxpa2U6IHRoaXMuX2hhc093bmVyTGlrZVxuICAgIH07XG4gIH1cblxuICByZW1vdmUoKSB7XG4gICAgdGhpcy5fY2FyZEl0ZW0ucmVtb3ZlKCk7XG4gIH1cblxuICBnZW5lcmF0ZSgpIHtcbiAgICB0aGlzLl9oYXNPd25lckxpa2UgPSB0aGlzLnVwZGF0ZU93bmVyc0xpa2UodGhpcy5fbGlrZXMsIHRoaXMuX3VzZXJJZCk7XG4gICAgdGhpcy5fc2V0Q2FyZENvbnRlbnQoKTtcbiAgICB0aGlzLl9zZXRMaWtlc1F1YW50aXR5KCk7XG4gICAgdGhpcy5fdG9nZ2xlTGlrZXNDbGFzcygpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJdGVtO1xuICB9O1xuXG4gIF90b2dnbGVMaWtlc0NsYXNzKCkge1xuICAgIHN3aXRjaCAodGhpcy5faGFzT3duZXJMaWtlKSB7XG4gICAgICBjYXNlIHRydWU6XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoQ0FSRC5MSUtFX0JVVFRPTl9BQ1RJVkUpO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAn0KPQsdGA0LDRgtGMINC+0YLQvNC10YLQutGDIFxcXCLQn9C+0L3RgNCw0LLQuNC70L7RgdGMXFxcIicpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgZmFsc2U6XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoQ0FSRC5MSUtFX0JVVFRPTl9BQ1RJVkUpO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAn0JTQvtCx0LDQstC40YLRjCDQvtGC0LzQtdGC0LrRgyBcXFwi0J/QvtC90YDQsNCy0LjQu9C+0YHRjFxcXCInKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ0xJQ0ssICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdG5DbGljayh0aGlzKSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ0xJQ0ssICgpID0+IHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcykpO1xuICAgIHRoaXMuX293bmVyLl9pZCA9PT0gdGhpcy5fdXNlcklkXG4gICAgICA/IHRoaXMuX2NhcmREZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DTElDSywgdGhpcy5faGFuZGxlRGVsZXRlQnRuQ2xpY2spXG4gICAgICA6IHRoaXMuX2NhcmREZWxldGUucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbGlkYXRpb24ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBmb3JtU2VsZWN0b3IsXG4gICAge1xuICAgICAgaW5wdXRTZWxlY3RvcixcbiAgICAgIGJ1dHRvblNlbGVjdG9yLFxuICAgICAgZXJyb3JTZWxlY3RvcixcbiAgICAgIGlucHV0RXJyb3JDbGFzcyxcbiAgICAgIGJ1dHRvbkRpc2FibGVkQ2xhc3MsXG4gICAgICBlcnJvckFjdGl2ZUNsYXNzXG4gICAgfSkge1xuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fYnV0dG9uU2VsZWN0b3IgPSBidXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9lcnJvclNlbGVjdG9yID0gZXJyb3JTZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBpbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fYnV0dG9uRGlzYWJsZWRDbGFzcyA9IGJ1dHRvbkRpc2FibGVkQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JBY3RpdmVDbGFzcyA9IGVycm9yQWN0aXZlQ2xhc3M7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JBY3RpdmVDbGFzcyk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgYCR7dGhpcy5fZXJyb3JBY3RpdmVDbGFzc31gKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JFbGVtZW50KSB7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JBY3RpdmVDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBpbnB1dEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXRFbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3Rvcih0aGlzLl9lcnJvclNlbGVjdG9yKTtcblxuICAgIGlucHV0RWxlbWVudC52YWxpZGl0eS5wYXR0ZXJuTWlzbWF0Y2hcbiAgICAgID8gaW5wdXRFbGVtZW50LnNldEN1c3RvbVZhbGlkaXR5KGlucHV0RWxlbWVudC5kYXRhc2V0LmludmFsaWRNZXNzYWdlKVxuICAgICAgOiBpbnB1dEVsZW1lbnQuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuXG4gICAgIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuICAgICAgPyB0aGlzLl9zaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvckVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSlcbiAgICAgIDogdGhpcy5faGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JFbGVtZW50KTtcbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0c0xpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRzTGlzdC5zb21lKGlucHV0RWxlbWVudCA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYnV0dG9uRGlzYWJsZWRDbGFzcyk7XG4gICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2J1dHRvbkRpc2FibGVkQ2xhc3MpO1xuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRGb3JtRXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpIHtcbiAgICBjb25zdCBpbnB1dHNMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9idXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRzTGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgaW5wdXRzTGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRzTGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsICgpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRzTGlzdCwgYnV0dG9uRWxlbWVudCksIDApO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0Rm9ybUV2ZW50TGlzdGVuZXJzKFxuICAgICAgdGhpcy5fZm9ybSxcbiAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IsXG4gICAgICB0aGlzLl9idXR0b25TZWxlY3RvcixcbiAgICAgIHRoaXMuX2Vycm9yU2VsZWN0b3IsXG4gICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MsXG4gICAgICB0aGlzLl9idXR0b25EaXNhYmxlZENsYXNzLFxuICAgICAgdGhpcy5fZXJyb3JBY3RpdmVDbGFzcyxcbiAgICApO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgRVJST1IsIEVWRU5UIH0gZnJvbSAnLi9lbnVtLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih7IGNvZGUsIGJvZHkgfSkge1xuICAgIHRoaXMuX3RlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRVJST1IuVEVNUExBVEUpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihFUlJPUi5TRUxFQ1RPUik7XG4gICAgdGhpcy5fd3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKEVSUk9SLldSQVBQRVIpO1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgfVxuXG4gIF9hZGRFcnJvckFjdGl2ZUNsYXNzKGVycm9yRWxlbWVudCkge1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKEVSUk9SLkFDVElWRV9DTEFTUyk7XG4gICAgdGhpcy5fd3JhcHBlckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZXJyb3JfYWN0aXZlJyk7XG4gIH1cblxuICBfcmVtb3ZlRXJyb3JBY3RpdmVDbGFzcyhlcnJvckVsZW1lbnQpIHtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShFUlJPUi5BQ1RJVkVfQ0xBU1MpO1xuICAgIHRoaXMuX3dyYXBwZXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yX2FjdGl2ZScpO1xuICB9O1xuXG4gIF9jbG9zZUJ1dHRvbkxpc3RlbmVyID0gKGVsZW1lbnQpID0+IHtcbiAgICB0aGlzLl9yZW1vdmVFcnJvckFjdGl2ZUNsYXNzKGVsZW1lbnQpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gZWxlbWVudC5yZW1vdmUoKSwgNTAwKTtcbiAgfTtcblxuICBjcmVhdGVFcnJvcigpIHtcbiAgICBjb25zdCBlcnJvckl0ZW0gPSB0aGlzLl90ZW1wbGF0ZUVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgIGNvbnN0IGVycm9ySXRlbVRpdGxlID0gZXJyb3JJdGVtLnF1ZXJ5U2VsZWN0b3IoRVJST1IuVElUTEUpO1xuICAgIGNvbnN0IGVycm9ySXRlbUJvZHkgPSBlcnJvckl0ZW0ucXVlcnlTZWxlY3RvcihFUlJPUi5ERVNDUklQVElPTik7XG4gICAgY29uc3QgZXJyb3JJdGVtQnV0dG9uID0gZXJyb3JJdGVtLnF1ZXJ5U2VsZWN0b3IoRVJST1IuQlVUVE9OKTtcbiAgICB0aGlzLl9hZGRFcnJvckFjdGl2ZUNsYXNzKGVycm9ySXRlbSk7XG4gICAgZXJyb3JJdGVtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ0xJQ0ssICgpID0+IHRoaXMuX2Nsb3NlQnV0dG9uTGlzdGVuZXIoZXJyb3JJdGVtKSk7XG4gICAgZXJyb3JJdGVtVGl0bGUudGV4dENvbnRlbnQgPSBg0JrQvtC0ICR7dGhpcy5jb2RlfWA7XG4gICAgZXJyb3JJdGVtQm9keS50ZXh0Q29udGVudCA9IHRoaXMuYm9keTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2Nsb3NlQnV0dG9uTGlzdGVuZXIoZXJyb3JJdGVtKSwgNTAwMClcbiAgICByZXR1cm4gZXJyb3JJdGVtO1xuICB9XG59XG5cbiIsImltcG9ydCB7IEVWRU5ULCBLRVksIFBPUFVQIH0gZnJvbSAnLi9lbnVtLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICBfaGFuZGxlTW91c2VFdmVudChlKSB7XG4gICAgY29uc3QgY2xvc2VDb25kaXRpb24gPSBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUE9QVVAuQ0xBU1NOQU1FKVxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBPUFVQLkNMT1NFX0NMQVNTTkFNRSk7XG4gICAgaWYgKGNsb3NlQ29uZGl0aW9uKSB0aGlzLmNsb3NlKCk7XG4gIH07XG5cbiAgX2hhbmRsZUtleWJvYXJkRXZlbnQoZSkge1xuICAgIGlmIChlLmtleSA9PT0gS0VZLkVTQ0FQRSkgdGhpcy5jbG9zZSgpO1xuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTU9VU0VET1dOLCAoZSkgPT4gdGhpcy5faGFuZGxlTW91c2VFdmVudChlKSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoUE9QVVAuQUNUSVZFX0NMQVNTKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKEVWRU5ULktFWURPV04sIChlKSA9PiB0aGlzLl9oYW5kbGVLZXlib2FyZEV2ZW50KGUpKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX3BvcHVwLmZvY3VzKCksIFBPUFVQLkFOSU1BVElPTl9EVVJBVElPTik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFBPUFVQLkFDVElWRV9DTEFTUyk7XG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5LRVlET1dOLCB0aGlzLl9oYW5kbGVLZXlib2FyZEV2ZW50KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaW1hZ2VTZWxlY3RvciwgdGl0bGVTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbWFnZVNlbGVjdG9yKTtcbiAgICB0aGlzLl90aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGVTZWxlY3Rvcik7XG4gIH1cblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcbmltcG9ydCB7IEVWRU5ULCBGT1JNLCBWQUxJREFUSU9OIH0gZnJvbSAnLi9lbnVtLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgX3N1Ym1pdEhhbmRsZXI7XG5cbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBzdXBlcihzZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLnF1ZXJ5U2VsZWN0b3IoRk9STS5TRUxFQ1RPUik7XG4gICAgdGhpcy5fc3VibWl0dGVyID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFZBTElEQVRJT04uQlVUVE9OX1NFTEVDVE9SKTtcbiAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gKCkgPT4ge1xuICAgIH07XG4gIH1cblxuICBnZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0aGlzLl9mb3JtKTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhKTtcbiAgfVxuXG4gIGZpbGxJbnB1dHModXNlckRhdGEpIHtcbiAgICB0aGlzLl9zdWJtaXR0ZXIuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIHRoaXMuX3N1Ym1pdHRlci5jbGFzc0xpc3QuYWRkKFZBTElEQVRJT04uQlVUVE9OX0RJU0FCTEVEX0NMQVNTKTtcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModXNlckRhdGEpO1xuICAgIGtleXMuZm9yRWFjaChpbnB1dCA9PiB0aGlzLl9mb3JtLmVsZW1lbnRzW2lucHV0XS52YWx1ZSA9IHVzZXJEYXRhW2lucHV0XSk7XG4gIH1cblxuICB1cGRhdGVTdWJtaXRIYW5kbGVyKGhhbmRsZVN1Ym1pdCkge1xuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5TVUJNSVQsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XG4gICAgfSk7XG4gIH1cblxuICByZXNldEZvcm0oKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgb3BlbihzYXZlU2Vzc2lvbkRhdGEgPSAoKSA9PiB7fSkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9zYXZlU2Vzc2lvbkRhdGEgPSBzYXZlU2Vzc2lvbkRhdGE7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSAoKSA9PiB7XG4gICAgfTtcbiAgICB0aGlzLl9zYXZlU2Vzc2lvbkRhdGEoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICcuL3N0eWxlcy9wYWdlcy9pbmRleC5jc3MnO1xuaW1wb3J0IEFwaSBmcm9tICcuL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCB7IENBUkQsIGFwaUNvbmZpZywgdmFsaWRhdGlvbkNvbmZpZywgUE9QVVAsIFBST0ZJTEUsIExPQURFUiwgRVZFTlQsIEVSUk9SIH0gZnJvbSAnLi9jb21wb25lbnRzL2VudW0uanMnO1xuaW1wb3J0IExvYWRlciBmcm9tICcuL2NvbXBvbmVudHMvTG9hZGVyLmpzJztcbmltcG9ydCBQcm9maWxlIGZyb20gJy4vY29tcG9uZW50cy9Qcm9maWxlLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBWYWxpZGF0aW9uIGZyb20gJy4vY29tcG9uZW50cy9WYWxpZGF0aW9uLmpzJztcbmltcG9ydCBFcnJvciBmcm9tICcuL2NvbXBvbmVudHMvRXJyb3IuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gIGNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcbiAgY29uc3QgZXJyb3JMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgIHJlbmRlcmVyOiAoZXJyb3IpID0+IHJlbmRlckNhcmRzKGVycm9yLCBlcnJvckxpc3QpLFxuICAgIGNvbnRhaW5lclNlbGVjdG9yOiBFUlJPUi5MSVNUXG4gIH0pO1xuICBjb25zdCBQcm9maWxlQXZhdGFyRm9ybSA9IG5ldyBWYWxpZGF0aW9uKCcuZm9ybV90eXBlX2F2YXRhcicsIHZhbGlkYXRpb25Db25maWcpO1xuICBQcm9maWxlQXZhdGFyRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IFByb2ZpbGVFZGl0Rm9ybSA9IG5ldyBWYWxpZGF0aW9uKCcuZm9ybV90eXBlX2VkaXQnLCB2YWxpZGF0aW9uQ29uZmlnKTtcbiAgUHJvZmlsZUVkaXRGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgY29uc3QgUHJvZmlsZUFkZENhcmRGb3JtID0gbmV3IFZhbGlkYXRpb24oJy5mb3JtX3R5cGVfYWRkJywgdmFsaWRhdGlvbkNvbmZpZyk7XG4gIFByb2ZpbGVBZGRDYXJkRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IHBvcHVwSW1hZ2VEZXRhaWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoUE9QVVAuVFlQRV9QSE9UTywgUE9QVVAuSU1BR0UsIFBPUFVQLlRJVExFKTtcbiAgcG9wdXBJbWFnZURldGFpbC5zZXRFdmVudExpc3RlbmVycygpO1xuICBjb25zdCBwb3B1cENhcmREZWxldGUgPSBuZXcgUG9wdXBXaXRoRm9ybShQT1BVUC5UWVBFX0RFTEVURSk7XG4gIHBvcHVwQ2FyZERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xuICBjb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShQT1BVUC5UWVBFX0FWQVRBUik7XG4gIHBvcHVwRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuICBjb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oUE9QVVAuVFlQRV9QUk9GSUxFKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuICBjb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShQT1BVUC5UWVBFX0NBUkQpO1xuICBwb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgY29uc3Qgc2F2ZVNlc3Npb25EYXRhID0gKHBvcHVwKSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCBvY2N1cGF0aW9uIH0gPSBwb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJywgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGFib3V0OiBvY2N1cGF0aW9uXG4gICAgfSkpO1xuICB9XG4gIGNvbnN0IGRlbGV0ZVN1Ym1pdEhhbmRsZXIgPSBhc3luYyAoY2FyZCwgcG9wdXApID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCB9ID0gY2FyZC5nZXREYXRhKCk7XG4gICAgICBhd2FpdCBhcGkucmVtb3ZlQ2FyZChpZCk7XG4gICAgICBjYXJkLnJlbW92ZSgpO1xuICAgICAgcG9wdXAuY2xvc2UoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCB7IG5hbWUgfSA9IGNhcmQuZ2V0RGF0YSgpO1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoeyBjb2RlOiBlLCBib2R5OiBg0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCDQv9GA0Lgg0L/QvtC/0YvRgtC60LUg0YPQtNCw0LvQuNGC0Ywg0LrQsNGA0YLQvtGH0LrRgyBcXHUwMGFiJHtuYW1lfVxcdTAwYmIuYCB9KTtcbiAgICAgIGVycm9yLmNyZWF0ZUVycm9yKCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBoYW5kbGVMaWtlID0gYXN5bmMgKGNhcmQpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBpZCwgaGFzT3duZXJMaWtlIH0gPSBjYXJkLmdldERhdGEoKTtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBhd2FpdCBhcGkudG9nZ2xlTGlrZShpZCwgaGFzT3duZXJMaWtlKTtcbiAgICAgIGNhcmQudG9nZ2xlTGlrZShuZXdDYXJkKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCB7IG5hbWUsIGhhc093bmVyTGlrZSB9ID0gY2FyZC5nZXREYXRhKCk7XG4gICAgICBsZXQgdmVyYjtcbiAgICAgIChoYXNPd25lckxpa2UpID8gdmVyYiA9ICfRgdC90Y/RgtGMJyA6IHZlcmIgPSAn0LTQvtCx0LDQstC40YLRjCc7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcih7XG4gICAgICAgIGNvZGU6IGUsXG4gICAgICAgIGJvZHk6IGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINC/0YDQuCDQv9C+0L/Ri9GC0LrQtSAke3ZlcmJ9INC70LDQudC6INC60LDRgNGC0L7Rh9C60LUgXFx1MDBhYiR7bmFtZX1cXHUwMGJiLmBcbiAgICAgIH0pO1xuICAgICAgZXJyb3IuY3JlYXRlRXJyb3IoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZURlbGV0ZSA9IChjYXJkKSA9PiB7XG4gICAgcG9wdXBDYXJkRGVsZXRlLm9wZW4oKTtcbiAgICBwb3B1cENhcmREZWxldGUudXBkYXRlU3VibWl0SGFuZGxlcigoKSA9PiBkZWxldGVTdWJtaXRIYW5kbGVyKGNhcmQsIHBvcHVwQ2FyZERlbGV0ZSkpO1xuICB9O1xuICBjb25zdCBoYW5kbGVJbWFnZSA9IChjYXJkKSA9PiB7XG4gICAgY29uc3QgeyBuYW1lLCBsaW5rIH0gPSBjYXJkLmdldERhdGEoKTtcbiAgICBwb3B1cEltYWdlRGV0YWlsLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xuICB9O1xuICBjb25zdCByZW5kZXJDYXJkcyA9IChkYXRhLCB1c2VyLCBzZWN0aW9uKSA9PiB7XG4gICAgY29uc3QgeyBfaWQgfSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UudXNlckRhdGEpO1xuICAgIGNvbnN0IGNhcmRDbG9uZSA9IG5ldyBDYXJkKHtcbiAgICAgIHNlbGVjdG9yOiBDQVJELlRFTVBMQVRFLFxuICAgICAgY2FyZDoge1xuICAgICAgICBpZDogZGF0YS5faWQsXG4gICAgICAgIGxpa2VzOiBkYXRhLmxpa2VzLFxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgICAgb3duZXI6IGRhdGEub3duZXJcbiAgICAgIH0sXG4gICAgICB1c2VySWQ6IF9pZCxcbiAgICAgIGhhbmRsZUxpa2VCdG5DbGljazogKCkgPT4gaGFuZGxlTGlrZShjYXJkQ2xvbmUpLFxuICAgICAgaGFuZGxlRGVsZXRlQnRuQ2xpY2s6ICgpID0+IGhhbmRsZURlbGV0ZShjYXJkQ2xvbmUpLFxuICAgICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4gaGFuZGxlSW1hZ2UoY2FyZENsb25lKVxuICAgIH0pO1xuICAgIGNvbnN0IGNhcmRJdGVtID0gY2FyZENsb25lLmdlbmVyYXRlKCk7XG4gICAgc2VjdGlvbi5wcmVwZW5kKGNhcmRJdGVtKTtcbiAgfTtcbiAgY29uc3QgY3JlYXRlVXNlciA9ICgpID0+IHtcbiAgICByZXR1cm4gbmV3IFByb2ZpbGUoe1xuICAgICAgbmFtZVNlbGVjdG9yOiBQUk9GSUxFLkNPTlRFTlRfTkFNRSxcbiAgICAgIG9jY3VwYXRpb25TZWxlY3RvcjogUFJPRklMRS5DT05URU5UX09DQ1VQQVRJT04sXG4gICAgICBhdmF0YXJTZWxlY3RvcjogUFJPRklMRS5DT05URU5UX0FWQVRBUixcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgZmlsbFVzZXJGaWVsZHMgPSAodXNlciwgdXNlckRhdGEpID0+IHtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICBhYm91dDogdXNlckRhdGEuYWJvdXQsXG4gICAgICBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhcixcbiAgICAgIGlkOiB1c2VyRGF0YS5faWRcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgY3JlYXRlRmVlZCA9ICh1c2VyKSA9PiB7XG4gICAgY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAge1xuICAgICAgICByZW5kZXJlcjogKGNhcmQpID0+IHJlbmRlckNhcmRzKGNhcmQsIHVzZXIsIHNlY3Rpb24pLFxuICAgICAgICBjb250YWluZXJTZWxlY3RvcjogQ0FSRC5XUkFQUEVSXG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gc2VjdGlvbjtcbiAgfTtcbiAgY29uc3QgdGhyb3dVc2VyRXJyb3IgPSAoeyBjb2RlLCBib2R5IH0pID0+IHtcbiAgICBjb25zdCBlcnJvckl0ZW0gPSBuZXcgRXJyb3IoeyBjb2RlLCBib2R5IH0pO1xuICAgIGVycm9yTGlzdC5wcmVwZW5kKGVycm9ySXRlbS5jcmVhdGVFcnJvcigpKTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlUHJvZmlsZUF2YXRhclN1Ym1pdCA9IGFzeW5jIChwb3B1cCwgdXNlcikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGxpbmsgfSA9IHBvcHVwLmdldElucHV0VmFsdWVzKCk7XG4gICAgICBhd2FpdCBhcGkudXBkYXRlVXNlckF2YXRhcihsaW5rKTtcbiAgICAgIHVzZXIuc2V0VXNlckluZm8oeyBhdmF0YXI6IGxpbmsgfSk7XG4gICAgICBwb3B1cC5jbG9zZSgpO1xuICAgICAgcG9wdXAucmVzZXRGb3JtKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc3QgeyBuYW1lIH0gPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLnVzZXJEYXRhKTtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKHtcbiAgICAgICAgY29kZTogZSxcbiAgICAgICAgYm9keTogYNCf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0L/RgNC4INC/0L7Qv9GL0YLQutC1INC40LfQvNC10L3QuNGC0Ywg0LjQt9C+0LHRgNCw0LbQtdC90LjQtSDQv9GA0L7RhNC40LvRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gXFx1MDBhYiR7bmFtZX1cXHUwMGJiLmBcbiAgICAgIH0pO1xuICAgICAgZXJyb3IuY3JlYXRlRXJyb3IoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZVByb2ZpbGVBdmF0YXJCdXR0b25DbGljayA9ICh1c2VyKSA9PiB7XG4gICAgcG9wdXBFZGl0QXZhdGFyLm9wZW4oKTtcbiAgICBwb3B1cEVkaXRBdmF0YXIudXBkYXRlU3VibWl0SGFuZGxlcigoKSA9PiBoYW5kbGVQcm9maWxlQXZhdGFyU3VibWl0KHBvcHVwRWRpdEF2YXRhciwgdXNlcikpO1xuICB9O1xuICBjb25zdCBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCA9IGFzeW5jIChwb3B1cCwgdXNlcikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IG5hbWUsIG9jY3VwYXRpb24gfSA9IHBvcHVwLmdldElucHV0VmFsdWVzKCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFwaS51cGRhdGVVc2VyKHsgbmFtZTogbmFtZSwgYWJvdXQ6IG9jY3VwYXRpb24gfSk7XG4gICAgICB1c2VyLnNldFVzZXJJbmZvKHsgbmFtZTogcmVzcG9uc2UubmFtZSwgYWJvdXQ6IHJlc3BvbnNlLmFib3V0IH0pO1xuICAgICAgcG9wdXAuY2xvc2UoKTtcbiAgICAgIHBvcHVwLnJlc2V0Rm9ybSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnN0IHsgbmFtZSB9ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS51c2VyRGF0YSk7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcih7XG4gICAgICAgIGNvZGU6IGUsXG4gICAgICAgIGJvZHk6IGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINC/0YDQuCDQv9C+0L/Ri9GC0LrQtSDQuNC30LzQtdC90LjRgtGMINC40LzRjyDQuNC70Lgg0L7Qv9C40YHQsNC90LjQtSDQv9GA0L7RhNC40LvRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gXFx1MDBhYiR7bmFtZX1cXHUwMGJiLmBcbiAgICAgIH0pO1xuICAgICAgZXJyb3IuY3JlYXRlRXJyb3IoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZVByb2ZpbGVFZGl0QnV0dG9uQ2xpY2sgPSAodXNlcikgPT4ge1xuICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UudXNlckRhdGEpO1xuICAgIHBvcHVwRWRpdFByb2ZpbGUuZmlsbElucHV0cyh7IG5hbWU6IG5hbWUsIG9jY3VwYXRpb246IGFib3V0IH0pO1xuICAgIHBvcHVwRWRpdFByb2ZpbGUudXBkYXRlU3VibWl0SGFuZGxlcigoKSA9PiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChwb3B1cEVkaXRQcm9maWxlLCB1c2VyKSk7XG4gICAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCgpID0+IHNhdmVTZXNzaW9uRGF0YShwb3B1cEVkaXRQcm9maWxlKSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUFkZENhcmRTdWJtaXQgPSBhc3luYyAocG9wdXAsIHVzZXIsIGNhcmRzRmVlZCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHRpdGxlLCBsaW5rIH0gPSBwb3B1cC5nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgY29uc3QgeyBfaWQgfSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UudXNlckRhdGEpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhcGkuYWRkQ2FyZCh7IG5hbWU6IHRpdGxlLCBsaW5rOiBsaW5rIH0pO1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgc2VsZWN0b3I6IENBUkQuVEVNUExBVEUsXG4gICAgICAgIGNhcmQ6IHtcbiAgICAgICAgICBpZDogcmVzcG9uc2UuX2lkLFxuICAgICAgICAgIGxpa2VzOiByZXNwb25zZS5saWtlcyxcbiAgICAgICAgICBsaW5rOiByZXNwb25zZS5saW5rLFxuICAgICAgICAgIG5hbWU6IHJlc3BvbnNlLm5hbWUsXG4gICAgICAgICAgb3duZXI6IHJlc3BvbnNlLm93bmVyXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJJZDogX2lkLFxuICAgICAgICBoYW5kbGVMaWtlQnRuQ2xpY2s6ICgpID0+IGhhbmRsZUxpa2UoY2FyZCksXG4gICAgICAgIGhhbmRsZURlbGV0ZUJ0bkNsaWNrOiAoKSA9PiBoYW5kbGVEZWxldGUoY2FyZCksXG4gICAgICAgIGhhbmRsZUltYWdlQ2xpY2s6ICgpID0+IGhhbmRsZUltYWdlKGNhcmQpXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGNhcmRJdGVtID0gY2FyZC5nZW5lcmF0ZSgpO1xuICAgICAgY2FyZHNGZWVkLnByZXBlbmQoY2FyZEl0ZW0pO1xuICAgICAgcG9wdXAuY2xvc2UoKTtcbiAgICAgIHBvcHVwLnJlc2V0Rm9ybSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnN0IHsgbmFtZSB9ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS51c2VyRGF0YSk7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcih7XG4gICAgICAgIGNvZGU6IGUsXG4gICAgICAgIGJvZHk6IGDQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINC/0YDQuCDRgdC+0LfQtNCw0L3QuNC4INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCDQtNC70Y8g0L/RgNC+0YTQuNC70Y8gXFx1MDBhYiR7bmFtZX1cXHUwMGJiLmBcbiAgICAgIH0pO1xuICAgICAgZXJyb3IuY3JlYXRlRXJyb3IoKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGhhbmRsZUFkZENhcmRCdXR0b25DbGljayA9ICh1c2VyLCBjYXJkc0ZlZWQpID0+IHtcbiAgICBwb3B1cEFkZENhcmQub3BlbigpO1xuICAgIHBvcHVwQWRkQ2FyZC51cGRhdGVTdWJtaXRIYW5kbGVyKGFzeW5jICgpID0+IGhhbmRsZUFkZENhcmRTdWJtaXQocG9wdXBBZGRDYXJkLCB1c2VyLCBjYXJkc0ZlZWQpKTtcbiAgfTtcbiAgY29uc3Qgc2V0UHJvZmlsZUJ1dHRvbnNMaXN0ZW5lcnMgPSAoY29uZmlnKSA9PiB7XG4gICAgY29uZmlnLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKGVsZW1lbnQuc2VsZWN0b3IpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNMSUNLLCBlbGVtZW50LmhhbmRsZUNsaWNrKTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3Qgc3RhcnRBcHAgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGxvYWRlciA9IG5ldyBMb2FkZXIoTE9BREVSLlNFTEVDVE9SLCBbUFJPRklMRS5DT05URU5UX05BTUUsIFBST0ZJTEUuQ09OVEVOVF9PQ0NVUEFUSU9OXSwgW1BST0ZJTEUuQVZBVEFSXSk7XG4gICAgICBsb2FkZXIuc3RhcnRMb2FkZXIoKTtcbiAgICAgIGNvbnN0IFt1c2VyRGF0YSwgY2FyZHNdID0gYXdhaXQgYXBpLmdldEFwcERhdGEoKTtcbiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXJEYXRhJywgSlNPTi5zdHJpbmdpZnkodXNlckRhdGEpKTtcbiAgICAgIGNvbnN0IHVzZXIgPSBjcmVhdGVVc2VyKCk7XG4gICAgICBmaWxsVXNlckZpZWxkcyh1c2VyLCB1c2VyRGF0YSk7XG4gICAgICBjb25zdCBjYXJkc0ZlZWQgPSBjcmVhdGVGZWVkKHVzZXIpO1xuICAgICAgY2FyZHNGZWVkLnJlbmRlcihjYXJkcyk7XG4gICAgICBzZXRQcm9maWxlQnV0dG9uc0xpc3RlbmVycyhbXG4gICAgICAgIHtcbiAgICAgICAgICBzZWxlY3RvcjogUFJPRklMRS5BVkFUQVIsXG4gICAgICAgICAgaGFuZGxlQ2xpY2s6ICgpID0+IGhhbmRsZVByb2ZpbGVBdmF0YXJCdXR0b25DbGljayh1c2VyKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNlbGVjdG9yOiBQUk9GSUxFLkJVVFRPTl9FRElUX1BST0ZJTEUsXG4gICAgICAgICAgaGFuZGxlQ2xpY2s6ICgpID0+IGhhbmRsZVByb2ZpbGVFZGl0QnV0dG9uQ2xpY2sodXNlciksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzZWxlY3RvcjogUFJPRklMRS5CVVRUT05fQUREX0NBUkQsXG4gICAgICAgICAgaGFuZGxlQ2xpY2s6ICgpID0+IGhhbmRsZUFkZENhcmRCdXR0b25DbGljayh1c2VyLCBjYXJkc0ZlZWQpLFxuICAgICAgICB9LFxuICAgICAgXSk7XG4gICAgICBsb2FkZXIuZW5kTG9hZGVyKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3dVc2VyRXJyb3IoeyBjb2RlOiBlLCBib2R5OiBg0J7RiNC40LHQutCwINC/0L7Qu9GD0YfQtdC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDRgSDRgdC10YDQstC10YDQsC5gIH0pO1xuICAgIH1cbiAgfTtcbiAgc3RhcnRBcHAoKTtcbn0pO1xuIl0sIm5hbWVzIjpbIkFwaSIsImhlYWRlcnMiLCJiYXNlVXJsIiwidGhpcyIsIl9oZWFkZXJzIiwiX2Jhc2VVcmwiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzVGV4dCIsInN0YXR1cyIsInVybCIsIm9wdGlvbnMiLCJjb21wdXRlZFVybCIsImZldGNoIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiX3JlcXVlc3QiLCJhbGwiLCJnZXRVc2VyIiwiZ2V0Q2FyZHMiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImxpbmsiLCJjYXJkSWQiLCJoYXNPd25lckxpa2UiLCJhcGlDb25maWciLCJhdXRob3JpemF0aW9uIiwidmFsaWRhdGlvbkNvbmZpZyIsImlucHV0U2VsZWN0b3IiLCJidXR0b25TZWxlY3RvciIsImVycm9yU2VsZWN0b3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJidXR0b25EaXNhYmxlZENsYXNzIiwiZXJyb3JBY3RpdmVDbGFzcyIsIkxPQURFUiIsIkVWRU5UIiwiUFJPRklMRSIsIlBPUFVQIiwiRVJST1IiLCJDQVJEIiwiTG9hZGVyIiwic2VsZWN0b3IiLCJ0ZXh0RWxlbWVudHMiLCJpbWFnZUVsZW1lbnRzIiwiX2xvYWRlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl90ZXh0RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2ltYWdlRWxlbWVudHMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJmb3JFYWNoIiwiZWxlbWVudCIsIl9hZGRUZXh0RWZmZWN0IiwiX2FkZEltYWdlRWZmZWN0IiwiX3Nob3dTcGlubmVyIiwiX3JlbW92ZVRleHRFZmZlY3QiLCJfcmVtb3ZlSW1hZ2VFZmZlY3QiLCJfaGlkZVNwaW5uZXIiLCJQcm9maWxlIiwibmFtZVNlbGVjdG9yIiwib2NjdXBhdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWVFbGVtZW50IiwiX3Byb2ZpbGVBYm91dEVsZW1lbnQiLCJfcHJvZmlsZUF2YXRhckVsZW1lbnQiLCJ1c2VyRGF0YSIsImlkIiwidGV4dENvbnRlbnQiLCJzcmMiLCJfdXNlcklkIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJyZXZlcnNlIiwiaXRlbSIsInByZXBlbmQiLCJDYXJkIiwiY2FyZCIsIm93bmVyIiwibGlrZXMiLCJ1c2VySWQiLCJoYW5kbGVMaWtlQnRuQ2xpY2siLCJoYW5kbGVEZWxldGVCdG5DbGljayIsImhhbmRsZUltYWdlQ2xpY2siLCJfb3duZXIiLCJfbGlrZXMiLCJfbmFtZSIsIl9saW5rIiwiX2lkIiwiX2hhbmRsZUxpa2VCdG5DbGljayIsIl9oYW5kbGVEZWxldGVCdG5DbGljayIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJfY2FyZEl0ZW0iLCJjbG9uZU5vZGUiLCJfY2FyZEFydGljbGUiLCJfY2FyZEltYWdlIiwiX2NhcmRUaXRsZSIsIl9jYXJkTGlrZU51bWJlciIsIl9jYXJkTGlrZUJ1dHRvbiIsIl9jYXJkRGVsZXRlIiwic2V0QXR0cmlidXRlIiwidXBkYXRlT3duZXJzTGlrZSIsIl9zZXRMaWtlc1F1YW50aXR5IiwiX3RvZ2dsZUxpa2VzQ2xhc3MiLCJsZW5ndGgiLCJfaGFzT3duZXJMaWtlIiwic29tZSIsImxpa2UiLCJfc2V0Q2FyZENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiVmFsaWRhdGlvbiIsImZvcm1TZWxlY3RvciIsIl9mb3JtIiwiX2lucHV0U2VsZWN0b3IiLCJfYnV0dG9uU2VsZWN0b3IiLCJfZXJyb3JTZWxlY3RvciIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfYnV0dG9uRGlzYWJsZWRDbGFzcyIsIl9lcnJvckFjdGl2ZUNsYXNzIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwYXJlbnROb2RlIiwidmFsaWRpdHkiLCJwYXR0ZXJuTWlzbWF0Y2giLCJzZXRDdXN0b21WYWxpZGl0eSIsImRhdGFzZXQiLCJpbnZhbGlkTWVzc2FnZSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dHNMaXN0IiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJBcnJheSIsImZyb20iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2V0VGltZW91dCIsIl9zZXRGb3JtRXZlbnRMaXN0ZW5lcnMiLCJFcnJvciIsImNvZGUiLCJfcmVtb3ZlRXJyb3JBY3RpdmVDbGFzcyIsIl90ZW1wbGF0ZUVsZW1lbnQiLCJfd3JhcHBlckVsZW1lbnQiLCJlcnJvckl0ZW0iLCJlcnJvckl0ZW1UaXRsZSIsImVycm9ySXRlbUJvZHkiLCJlcnJvckl0ZW1CdXR0b24iLCJfYWRkRXJyb3JBY3RpdmVDbGFzcyIsIl9jbG9zZUJ1dHRvbkxpc3RlbmVyIiwiUG9wdXAiLCJfcG9wdXAiLCJlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZSIsImtleSIsIl9oYW5kbGVNb3VzZUV2ZW50IiwiX2hhbmRsZUtleWJvYXJkRXZlbnQiLCJmb2N1cyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwU2VsZWN0b3IiLCJpbWFnZVNlbGVjdG9yIiwidGl0bGVTZWxlY3RvciIsIl9pbWFnZSIsIl90aXRsZSIsImFsdCIsIlBvcHVwV2l0aEZvcm0iLCJfc3VibWl0dGVyIiwiX3N1Ym1pdEhhbmRsZXIiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJrZXlzIiwiaW5wdXQiLCJlbGVtZW50cyIsInZhbHVlIiwiaGFuZGxlU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsInNhdmVTZXNzaW9uRGF0YSIsIl9zYXZlU2Vzc2lvbkRhdGEiLCJpIiwiYXBpIiwiZXJyb3JMaXN0IiwiZXJyb3IiLCJyZW5kZXJDYXJkcyIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cEltYWdlRGV0YWlsIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cENhcmREZWxldGUiLCJwb3B1cEVkaXRBdmF0YXIiLCJwb3B1cEVkaXRQcm9maWxlIiwicG9wdXBBZGRDYXJkIiwiZGVsZXRlU3VibWl0SGFuZGxlciIsInBvcHVwIiwiZ2V0RGF0YSIsInJlbW92ZUNhcmQiLCJjcmVhdGVFcnJvciIsImhhbmRsZUxpa2UiLCJ0b2dnbGVMaWtlIiwibmV3Q2FyZCIsInZlcmIiLCJoYW5kbGVEZWxldGUiLCJvcGVuIiwidXBkYXRlU3VibWl0SGFuZGxlciIsImhhbmRsZUltYWdlIiwiZGF0YSIsInVzZXIiLCJzZWN0aW9uIiwicGFyc2UiLCJzZXNzaW9uU3RvcmFnZSIsImNhcmRDbG9uZSIsImNhcmRJdGVtIiwiZ2VuZXJhdGUiLCJmaWxsVXNlckZpZWxkcyIsInNldFVzZXJJbmZvIiwiY3JlYXRlRmVlZCIsImhhbmRsZVByb2ZpbGVBdmF0YXJTdWJtaXQiLCJnZXRJbnB1dFZhbHVlcyIsInVwZGF0ZVVzZXJBdmF0YXIiLCJyZXNldEZvcm0iLCJoYW5kbGVQcm9maWxlQXZhdGFyQnV0dG9uQ2xpY2siLCJoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCIsIm9jY3VwYXRpb24iLCJ1cGRhdGVVc2VyIiwicmVzcG9uc2UiLCJoYW5kbGVQcm9maWxlRWRpdEJ1dHRvbkNsaWNrIiwiZmlsbElucHV0cyIsInNldEl0ZW0iLCJoYW5kbGVBZGRDYXJkU3VibWl0IiwiY2FyZHNGZWVkIiwidGl0bGUiLCJhZGRDYXJkIiwiaGFuZGxlQWRkQ2FyZEJ1dHRvbkNsaWNrIiwic3RhcnRBcHAiLCJsb2FkZXIiLCJzdGFydExvYWRlciIsImdldEFwcERhdGEiLCJjYXJkcyIsInJlbmRlciIsImhhbmRsZUNsaWNrIiwiZW5kTG9hZGVyIl0sInNvdXJjZVJvb3QiOiIifQ==