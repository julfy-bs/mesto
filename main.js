(()=>{"use strict";var e={baseUrl:"https://nomoreparties.co/v1/plus-cohort-19",headers:{authorization:"0f9e6763-ca59-4d6a-b788-b6c985602524","Content-Type":"application/json"}},t="loader_active",r="loader__skeleton",n="loader__skeleton_type_text",o="submit",a="keydown",c="mousedown",i="click",s=".profile__name",u=".profile__occupation",l=".profile__avatar",d="popup_active",f='[name="link"]',m=".feed__item",v="card__like-button_active",p="card__like-button_liked_true",y=function(e){!function(e){e.classList.remove(d)}(e),function(e){e.removeEventListener(c,_),e.removeEventListener(a,b)}(e)},_=function(e){var t=e.target.closest(".popup");(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&y(t)},b=function(e){if("Escape"===e.key){var t=e.target.closest(".popup");y(t)}},h=function(e){!function(e){e.classList.add(d)}(e),function(e){e.addEventListener(c,_),e.addEventListener(a,b)}(e),setTimeout((function(){return e.focus()}),200)},S=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Сохранить",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Сохранение...";t.textContent=e?n:r},L=function(e,t){t.preventDefault();var r=t.target.closest(".popup"),n=t.submitter;S(!0,n),e().then((function(){t.target.reset(),y(r)})).finally((function(){return S(!1,n)}))},g=function(e){return e.ok?e.json():Promise.reject("Ошибка!".concat(e.statusText," Код ошибки: ").concat(e.status,"."))};function q(t,r){var n="".concat(e.baseUrl,"/").concat(t);return fetch(n,r).then(g)}const k={delete:function(){}};var A,E=document.querySelector("#card").content.querySelector(m),C=document.querySelector(".feed__list"),x=document.querySelector(".popup_type_delete"),T=document.querySelector(".popup_type_photo"),w=T.querySelector(".popup__image"),O=T.querySelector(".popup__figcaption"),j=[],I=function(e){e.classList.add(v),e.setAttribute("aria-label",'Убрать отметку "Понравилось"')},D=function(e){e.classList.remove(v),e.setAttribute("aria-label",'Добавить отметку "Понравилось"')},P=function(e,t){switch(t){case!0:D(e);break;case!1:I(e)}},M=function(e){return e.classList.contains(v)},N=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"number"!=typeof r&&console.error("Значение количества лайков карточки должно быть числом"),0===r?(e.classList.remove(p),t.textContent=""):(e.classList.add(p),t.textContent=r)},U=function(e,t){A=0!==e.length&&e.some((function(e){return e._id===t}))},J=function(t,r){var n,o,a=E.cloneNode(!0),i=a.querySelector(".card"),s=i.querySelector(".card__image"),u=i.querySelector(".card__title"),l=i.querySelector(".card__like-number"),d=i.querySelector(".card__like-button"),f=i.querySelector(".card__delete"),v=t.likes.length>0?t.likes.length:0;return j.push(t),U(t.likes,r),n=u,o=t.name,n.textContent=o,function(e,t,r){e.setAttribute("src",r),e.setAttribute("alt",t)}(s,t.name,t.link),N(d,l,v),A?I(d):D(d),d.addEventListener(c,(function(){return function(t,r,n,o,a){var c,i=function(e){return j.find((function(t){return t._id===e}))}(n);switch(U(i.likes,a),t.setAttribute("disabled","disabled"),A){case!0:(c=n,q("cards/likes/".concat(c),{method:"DELETE",headers:e.headers})).then((function(e){U(e.likes,a),i.likes=e.likes,N(t,r,e.likes.length);var n=M(t);P(t,n)})).catch((function(e){return console.error("Ошибка ".concat(e.status," удаления лайка карточки: ").concat(e.statusText))})).finally((function(){return t.removeAttribute("disabled","disabled")}));break;case!1:(function(t){return q("cards/likes/".concat(t),{method:"PUT",headers:e.headers})})(n).then((function(e){U(e.likes,a),i.likes=e.likes,N(t,r,e.likes.length);var n=M(t);P(t,n)})).catch((function(e){return console.error("Ошибка ".concat(e.status," добавления лайка карточки: ").concat(e.statusText))})).finally((function(){return t.removeAttribute("disabled","disabled")}))}}(d,l,t._id,t.likes,r)})),s.addEventListener(c,(function(){return function(e,t){h(T),O.textContent=t.textContent,w.setAttribute("src",e.getAttribute("src")),w.setAttribute("alt",e.getAttribute("alt"))}(s,u)})),t.owner._id===r?f.addEventListener(c,(function(r){return function(t,r){k.delete=function(n){return function(t,r,n){var o=r.closest(m);L((function(){return function(t){return q("cards/".concat(t),{method:"DELETE",headers:e.headers})}(n).then((function(){return o.remove()})).catch((function(e){return console.error("Ошибка ".concat(e.status," редактирования информации профиля: ").concat(e.statusText))}))}),t)}(n,t,r)},h(x)}(r.target,t._id)})):f.remove(),a},H=function(e){C.prepend(e)},V=document.querySelector(".popup_type_avatar"),z=document.querySelector(l),$=document.forms.avatar,B=$.querySelector(f),F=document.querySelector(".popup_type_edit"),G=document.querySelector(s),K=document.querySelector(".profile__image"),Q=document.querySelector(u),R=document.querySelector(".profile__edit"),W=document.forms.profile,X=W.querySelector('[name="name"]'),Y=W.querySelector('[name="occupation"]'),Z=document.querySelector(".popup_type_add"),ee=document.querySelector(".profile__add"),te=document.forms.card,re=te.querySelector('[name="title"]'),ne=te.querySelector(f),oe=function(e){K.setAttribute("src",e)},ae=function(e){G.textContent=e},ce=function(e){Q.textContent=e},ie=function(e,t,r){e.some((function(e){return!e.validity.valid}))?(t.classList.add(r),t.setAttribute("disabled","disabled")):(t.classList.remove(r),t.removeAttribute("disabled","disabled"))},se=document.querySelector(".loader"),ue=document.querySelector(s),le=document.querySelector(l),de=document.querySelector(u);function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var me,ve=document.forms.delete,pe=localStorage.getItem("userId")||null;ee.addEventListener(i,(function(){h(Z)})),te.addEventListener(o,(function(t){L((function(){var t,r,n;return(t={name:re.value,link:ne.value},r=t.name,n=t.link,q("cards",{method:"POST",headers:e.headers,body:JSON.stringify({name:r,link:n})})).then((function(e){var t=J(e,e.owner._id);H(t)})).catch((function(e){return console.error("Ошибка ".concat(e.status," cоздания карточки: ").concat(e.statusText))}))}),t)})),R.addEventListener(i,(function(){h(F),X.value=G.textContent,Y.value=Q.textContent})),W.addEventListener(o,(function(t){var r={name:X.value,about:Y.value};L((function(){return(t=r,n=t.name,o=t.about,q("users/me",{method:"PATCH",headers:e.headers,body:JSON.stringify({name:n,about:o})})).then((function(e){ae(e.name),ce(e.about)})).catch((function(e){return console.error("Ошибка ".concat(e.status," редактирования информации профиля: ").concat(e.statusText))}));var t,n,o}),t)})),z.addEventListener(i,(function(){h(V)})),$.addEventListener(o,(function(t){L((function(){return(t=B.value,q("users/me/avatar",{method:"PATCH",headers:e.headers,body:JSON.stringify({avatar:t})})).then((function(e){oe(e.avatar)})).catch((function(e){return console.error("Ошибка ".concat(e.status," изменения аватара пользователя: ").concat(e.statusText))}));var t}),t)})),ve.addEventListener(o,(function(e){return k.delete(e)})),me={formSelector:".form",inputSelector:".form__input",buttonSelector:".form__button",errorSelector:".form__error",inputErrorClass:"form__input_type_error",buttonDisabledClass:"form__button_type_disabled",errorActiveClass:"form__error_active"},Array.from(document.querySelectorAll(me.formSelector)).forEach((function(e){return t=e,r=me.inputSelector,n=me.buttonSelector,o=me.errorSelector,a=me.inputErrorClass,c=me.buttonDisabledClass,i=me.errorActiveClass,s=Array.from(t.querySelectorAll(r)),u=t.querySelector(n),ie(s,u,c),s.forEach((function(e){e.addEventListener("input",(function(){!function(e,t,r,n,o){var a=t.parentNode.querySelector(r);t.validity.patternMismatch?t.setCustomValidity(t.dataset.invalidMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,r,n,o){r.classList.remove(o),r.textContent="",t.classList.remove(n),t.removeAttribute("aria-describedby")}(0,t,a,n,o):function(e,t,r,n,o,a){r.textContent=n,r.classList.add(a),t.classList.add(o),t.setAttribute("aria-describedby","".concat(a))}(0,t,a,t.validationMessage,n,o)}(0,e,o,a,i),ie(s,u,c)}))})),void t.addEventListener("reset",(function(){setTimeout((function(){return ie(s,u,c)}),0)}));var t,r,n,o,a,c,i,s,u})),document.addEventListener("DOMContentLoaded",(function(){se.classList.add(t),ue.classList.add(r),ue.classList.add(n),le.classList.add(r),de.classList.add(r),de.classList.add(n),Promise.all([q("users/me",{headers:e.headers}),q("cards",{headers:e.headers})]).then((function(e){var o,a,c=(a=2,function(e){if(Array.isArray(e))return e}(o=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,c,i=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(o,a)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=c[0],s=c[1];oe(i.avatar),ae(i.name),ce(i.about),pe=i._id,localStorage.setItem("userId",pe),s.reverse().forEach((function(e){var t=J(e,pe);H(t)})),se.classList.remove(t),ue.classList.remove(r),ue.classList.remove(n),le.classList.remove(r),de.classList.remove(r),de.classList.remove(n)})).catch((function(e){return console.error("Ошибка ".concat(e.status," получения информации о пользователе. ").concat(e.statusText))}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WU1ZckR3QyxNQUFLLFlBQXVCLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLHMyQkFBckI4SCxFQUFRLEtBQUVwRyxFQUFLLEtBQ3JCNkUsR0FBaUJ1QixFQUFTQyxRQUMxQnRCLEdBQWVxQixFQUFTbEUsTUFDeEI4QyxHQUFxQm9CLEVBQVNELE9BQzlCcEYsR0FBU3FGLEVBQVNqRixJQUNsQnlFLGFBQWFzQyxRQUFRLFNBQVVuSCxJQUMvQmYsRUFDR21JLFVBQ0FuQixTQUFRLFNBQUEzRixHQUNQLElBQU00RSxFQUFZN0UsRUFBV0MsRUFBTU4sSUFDbkMwQyxFQUFZd0MsRUFDZCxJRHZCTlIsR0FBT2pKLFVBQVVDLE9BQU9ULEdBQ3hCaUksR0FBWXpILFVBQVVDLE9BQU9ULEdBQzdCaUksR0FBWXpILFVBQVVDLE9BQU9ULEdBQzdCa0ksR0FBYzFILFVBQVVDLE9BQU9ULEdBQy9CbUksR0FBa0IzSCxVQUFVQyxPQUFPVCxHQUNuQ21JLEdBQWtCM0gsVUFBVUMsT0FBT1QsRUNvQmpDLElBQ0M2RyxPQUFNLFNBQUNqQyxHQUFLLE9BQUtELFFBQVFDLE1BQU0sVUFBRCxPQUFXQSxFQUFNNUIsT0FBTSxpREFBeUM0QixFQUFNN0IsWUFBYSxHQUN0SCxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL2VudW0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9jb21wb25lbnRzL2RlbGV0ZUNhcmRTZXJ2aWNlLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9wcm9maWxlLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9sb2FkZXIuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb25maWcgPSB7XG4gIGJhc2VVcmw6ICdodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvcGx1cy1jb2hvcnQtMTknLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJzBmOWU2NzYzLWNhNTktNGQ2YS1iNzg4LWI2Yzk4NTYwMjUyNCcsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSxcbn07XG5cbmNvbnN0IExPQURFUiA9IHtcbiAgU0VMRUNUT1I6ICcubG9hZGVyJyxcbiAgQUNUSVZFX0NMQVNTOiAnbG9hZGVyX2FjdGl2ZScsXG4gIFNLRUxFVE9OOiAnbG9hZGVyX19za2VsZXRvbicsXG4gIFNLRUxFVE9OX1RFWFQ6ICdsb2FkZXJfX3NrZWxldG9uX3R5cGVfdGV4dCdcbn1cblxuY29uc3QgS0VZID0ge1xuICBFU0NBUEU6ICdFc2NhcGUnXG59O1xuXG5jb25zdCBFVkVOVCA9IHtcbiAgU1VCTUlUOiAnc3VibWl0JyxcbiAgS0VZRE9XTjogJ2tleWRvd24nLFxuICBNT1VTRURPV046ICdtb3VzZWRvd24nLFxuICBNT1VTRVVQOiAnbW91c2V1cCcsXG4gIENMSUNLOiAnY2xpY2snXG59XG5cbmNvbnN0IFZBTElEQVRJT04gPSB7XG4gIEZPUk1fU0VMRUNUT1I6ICcuZm9ybScsXG4gIElOUFVUX1NFTEVDVE9SOiAnLmZvcm1fX2lucHV0JyxcbiAgSU5QVVRfRVJST1JfQ0xBU1M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgQlVUVE9OX1NFTEVDVE9SOiAnLmZvcm1fX2J1dHRvbicsXG4gIEJVVFRPTl9ESVNBQkxFRF9DTEFTUzogJ2Zvcm1fX2J1dHRvbl90eXBlX2Rpc2FibGVkJyxcbiAgRVJST1JfU0VMRUNUT1I6ICcuZm9ybV9fZXJyb3InLFxuICBFUlJPUl9BQ1RJVkVfQ0xBU1M6ICdmb3JtX19lcnJvcl9hY3RpdmUnXG59O1xuXG5jb25zdCBQUk9GSUxFID0ge1xuICBDT05URU5UX05BTUU6ICcucHJvZmlsZV9fbmFtZScsXG4gIENPTlRFTlRfT0NDVVBBVElPTjogJy5wcm9maWxlX19vY2N1cGF0aW9uJyxcbiAgQ09OVEVOVF9BVkFUQVI6ICcucHJvZmlsZV9faW1hZ2UnLFxuICBCVVRUT05fRURJVF9QUk9GSUxFOiAnLnByb2ZpbGVfX2VkaXQnLFxuICBCVVRUT05fQUREX0NBUkQ6ICcucHJvZmlsZV9fYWRkJyxcbiAgQVZBVEFSOiAnLnByb2ZpbGVfX2F2YXRhcicsXG59O1xuXG5jb25zdCBQT1BVUCA9IHtcbiAgU0VMRUNUT1I6ICcucG9wdXAnLFxuICBDTEFTU05BTUU6ICdwb3B1cCcsXG4gIENMT1NFX0NMQVNTTkFNRTogJ3BvcHVwX19jbG9zZScsXG4gIEFDVElWRV9DTEFTUzogJ3BvcHVwX2FjdGl2ZScsXG4gIEFOSU1BVElPTl9EVVJBVElPTjogMjAwLFxuICBUWVBFX1BST0ZJTEU6ICcucG9wdXBfdHlwZV9lZGl0JyxcbiAgVFlQRV9DQVJEOiAnLnBvcHVwX3R5cGVfYWRkJyxcbiAgVFlQRV9QSE9UTzogJy5wb3B1cF90eXBlX3Bob3RvJyxcbiAgVFlQRV9BVkFUQVI6ICcucG9wdXBfdHlwZV9hdmF0YXInLFxuICBUWVBFX0RFTEVURTogJy5wb3B1cF90eXBlX2RlbGV0ZScsXG4gIElNQUdFOiAnLnBvcHVwX19pbWFnZScsXG4gIFRJVExFOiAnLnBvcHVwX19maWdjYXB0aW9uJyxcbn07XG5cbmNvbnN0IEZPUk0gPSB7XG4gIFNFTEVDVE9SOiAnLmZvcm0nLFxuICBOQU1FX1BST0ZJTEU6ICdwcm9maWxlJyxcbiAgTkFNRV9DQVJEOiAnY2FyZCcsXG4gIE5BTUVfREVMRVRFOiAnZGVsZXRlJyxcbiAgTkFNRV9BVkFUQVI6ICdhdmF0YXInLFxuICBJTlBVVF9USVRMRTogJ1tuYW1lPVwidGl0bGVcIl0nLFxuICBJTlBVVF9MSU5LOiAnW25hbWU9XCJsaW5rXCJdJyxcbiAgSU5QVVRfTkFNRTogJ1tuYW1lPVwibmFtZVwiXScsXG4gIElOUFVUX09DQ1VQQVRJT046ICdbbmFtZT1cIm9jY3VwYXRpb25cIl0nLFxuICBCVVRUT05fVEVYVF9TQVZFOiAn0KHQvtGF0YDQsNC90LjRgtGMJyxcbiAgQlVUVE9OX1RFWFRfQ1JFQVRFOiAn0KHQvtC30LTQsNGC0YwnLFxuICBCVVRUT05fVEVYVF9DUkVBVElORzogJ9Ch0L7Qt9C00LDQvdC40LUuLi4nLFxuICBCVVRUT05fVEVYVF9TQVZJTkc6ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicsXG4gIEJVVFRPTl9URVhUX0RFTEVURTogJ9Cj0LTQsNC70LjRgtGMJyxcbiAgQlVUVE9OX1RFWFRfREVMRVRJTkc6ICfQo9C00LDQu9C10L3QuNC1Li4uJyxcbn07XG5cbmNvbnN0IENBUkQgPSB7XG4gIFdSQVBQRVI6ICcuZmVlZF9fbGlzdCcsXG4gIFRFTVBMQVRFOiAnI2NhcmQnLFxuICBJVEVNOiAnLmZlZWRfX2l0ZW0nLFxuICBJVEVNX0NMQVNTTkFNRTogJ2ZlZWRfX2l0ZW0nLFxuICBBUlRJQ0xFOiAnLmNhcmQnLFxuICBJTUFHRTogJy5jYXJkX19pbWFnZScsXG4gIFRJVExFOiAnLmNhcmRfX3RpdGxlJyxcbiAgTElLRV9CVVRUT046ICcuY2FyZF9fbGlrZS1idXR0b24nLFxuICBMSUtFX05VTUJFUjogJy5jYXJkX19saWtlLW51bWJlcicsXG4gIExJS0VfQlVUVE9OX0FDVElWRTogJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScsXG4gIExJS0VfQlVUVE9OX0lTX0xJS0VEOiAnY2FyZF9fbGlrZS1idXR0b25fbGlrZWRfdHJ1ZScsXG4gIERFTEVURTogJy5jYXJkX19kZWxldGUnXG59O1xuXG5leHBvcnQge1xuICBDQVJELFxuICBFVkVOVCxcbiAgS0VZLFxuICBGT1JNLFxuICBQT1BVUCxcbiAgUFJPRklMRSxcbiAgTE9BREVSLFxuICBWQUxJREFUSU9OLFxuICBjb25maWdcbn07XG4iLCJpbXBvcnQgeyBFVkVOVCwgS0VZLCBQT1BVUCB9IGZyb20gJy4vZW51bS5qcyc7XG5cbmNvbnN0IGFkZFBvcHVwQWN0aXZlQ2xhc3MgPSAocG9wdXApID0+IHtcbiAgcG9wdXAuY2xhc3NMaXN0LmFkZChQT1BVUC5BQ1RJVkVfQ0xBU1MpO1xufTtcblxuY29uc3QgcmVtb3ZlUG9wdXBBY3RpdmVDbGFzcyA9IChwb3B1cCkgPT4ge1xuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFBPUFVQLkFDVElWRV9DTEFTUyk7XG59O1xuXG5jb25zdCBjbG9zZVBvcHVwID0gKHBvcHVwKSA9PiB7XG4gIHJlbW92ZVBvcHVwQWN0aXZlQ2xhc3MocG9wdXApO1xuICByZW1vdmVQb3B1cEV2ZW50TGlzdGVuZXJzKHBvcHVwKTtcbn07XG5cbmNvbnN0IGhhbmRsZVBvcHVwTW91c2VFdmVudCA9IChlKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gZS50YXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG4gIGNvbnN0IGNsb3NlQ29uZGl0aW9uID0gZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFBPUFVQLkNMQVNTTkFNRSlcbiAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoUE9QVVAuQ0xPU0VfQ0xBU1NOQU1FKTtcbiAgaWYgKGNsb3NlQ29uZGl0aW9uKSBjbG9zZVBvcHVwKHBvcHVwKTtcbn07XG5cbmNvbnN0IGhhbmRsZVBvcHVwS2V5Ym9hcmRFdmVudCA9IChlKSA9PiB7XG4gIGlmIChlLmtleSA9PT0gS0VZLkVTQ0FQRSkge1xuICAgIGNvbnN0IHBvcHVwID0gZS50YXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG4gICAgY2xvc2VQb3B1cChwb3B1cCk7XG4gIH1cbn07XG5cbmNvbnN0IG9wZW5Qb3B1cCA9IChwb3B1cCkgPT4ge1xuICBhZGRQb3B1cEFjdGl2ZUNsYXNzKHBvcHVwKTtcbiAgYWRkUG9wdXBFdmVudExpc3RlbmVycyhwb3B1cCk7XG4gIHNldFRpbWVvdXQoKCkgPT4gcG9wdXAuZm9jdXMoKSwgUE9QVVAuQU5JTUFUSU9OX0RVUkFUSU9OKTtcbn07XG5cbmNvbnN0IHJlbmRlckxvYWRpbmcgPSAoaXNMb2FkaW5nLCBidXR0b24sIGJ1dHRvblRleHQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJywgbG9hZGluZ1RleHQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKSA9PiB7XG4gIGlmIChpc0xvYWRpbmcpIHtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcbiAgfSBlbHNlIHtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICB9XG59O1xuXG5jb25zdCBoYW5kbGVTdWJtaXQgPSAocmVxdWVzdCwgZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IHBvcHVwID0gZS50YXJnZXQuY2xvc2VzdChQT1BVUC5TRUxFQ1RPUik7XG4gIGNvbnN0IHBvcHVwRm9ybVN1Ym1pdEJ1dHRvbiA9IGUuc3VibWl0dGVyO1xuICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwRm9ybVN1Ym1pdEJ1dHRvbik7XG4gIHJlcXVlc3QoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGUudGFyZ2V0LnJlc2V0KCk7XG4gICAgICBjbG9zZVBvcHVwKHBvcHVwKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHJlbmRlckxvYWRpbmcoZmFsc2UsIHBvcHVwRm9ybVN1Ym1pdEJ1dHRvbikpO1xufTtcblxuZnVuY3Rpb24gYWRkUG9wdXBFdmVudExpc3RlbmVycyhwb3B1cCkge1xuICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk1PVVNFRE9XTiwgaGFuZGxlUG9wdXBNb3VzZUV2ZW50KTtcbiAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5LRVlET1dOLCBoYW5kbGVQb3B1cEtleWJvYXJkRXZlbnQpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVQb3B1cEV2ZW50TGlzdGVuZXJzKHBvcHVwKSB7XG4gIHBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuTU9VU0VET1dOLCBoYW5kbGVQb3B1cE1vdXNlRXZlbnQpO1xuICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULktFWURPV04sIGhhbmRsZVBvcHVwS2V5Ym9hcmRFdmVudCk7XG59XG5cbmV4cG9ydCB7XG4gIGNsb3NlUG9wdXAsXG4gIG9wZW5Qb3B1cCxcbiAgcmVuZGVyTG9hZGluZyxcbiAgaGFuZGxlU3VibWl0LFxufTtcbiIsImltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vZW51bS5qcyc7XG5cbmNvbnN0IGNoZWNrUmVzcG9uc2UgPSAocmVzKSA9PiB7XG4gIGlmIChyZXMub2spIHtcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCEke3Jlcy5zdGF0dXNUZXh0fSDQmtC+0LQg0L7RiNC40LHQutC4OiAke3Jlcy5zdGF0dXN9LmApO1xuICB9XG59O1xuXG5mdW5jdGlvbiByZXF1ZXN0KHVybCwgb3B0aW9ucykge1xuICBjb25zdCBjb21wdXRlZFVybCA9IGAke2NvbmZpZy5iYXNlVXJsfS8ke3VybH1gO1xuICByZXR1cm4gZmV0Y2goY29tcHV0ZWRVcmwsIG9wdGlvbnMpLnRoZW4oY2hlY2tSZXNwb25zZSk7XG59XG5cbmNvbnN0IGdldFVzZXIgPSAoKSA9PiByZXF1ZXN0KGB1c2Vycy9tZWAsIHsgaGVhZGVyczogY29uZmlnLmhlYWRlcnMgfSk7XG5cbmNvbnN0IGdldENhcmRzID0gKCkgPT4gcmVxdWVzdChgY2FyZHNgLCB7IGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzIH0pO1xuXG5jb25zdCB1cGRhdGVVc2VyID0gKHsgbmFtZSwgYWJvdXQgfSkgPT4gcmVxdWVzdChgdXNlcnMvbWVgLCB7XG4gIG1ldGhvZDogJ1BBVENIJyxcbiAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXG4gIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICBuYW1lLFxuICAgIGFib3V0XG4gIH0pXG59KTtcblxuY29uc3QgdXBkYXRlVXNlckF2YXRhciA9IChhdmF0YXIpID0+IHJlcXVlc3QoYHVzZXJzL21lL2F2YXRhcmAsIHtcbiAgbWV0aG9kOiAnUEFUQ0gnLFxuICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSlcbn0pO1xuXG5jb25zdCBhZGRDYXJkID0gKHsgbmFtZSwgbGluayB9KSA9PiByZXF1ZXN0KGBjYXJkc2AsIHtcbiAgbWV0aG9kOiAnUE9TVCcsXG4gIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSlcbn0pO1xuXG5jb25zdCByZW1vdmVDYXJkID0gKGNhcmRJZCkgPT4gcmVxdWVzdChgY2FyZHMvJHtjYXJkSWR9YCwge1xuICBtZXRob2Q6ICdERUxFVEUnLFxuICBoZWFkZXJzOiBjb25maWcuaGVhZGVyc1xufSk7XG5cbmNvbnN0IGRlbGV0ZUNhcmRMaWtlID0gKGNhcmRJZCkgPT4gcmVxdWVzdChgY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICBtZXRob2Q6ICdERUxFVEUnLFxuICBoZWFkZXJzOiBjb25maWcuaGVhZGVyc1xufSk7XG5cbmNvbnN0IGFkZENhcmRMaWtlID0gKGNhcmRJZCkgPT4gcmVxdWVzdChgY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICBtZXRob2Q6ICdQVVQnLFxuICBoZWFkZXJzOiBjb25maWcuaGVhZGVyc1xufSk7XG5cbmV4cG9ydCB7XG4gIGdldFVzZXIsXG4gIGdldENhcmRzLFxuICB1cGRhdGVVc2VyLFxuICBhZGRDYXJkLFxuICByZW1vdmVDYXJkLFxuICBkZWxldGVDYXJkTGlrZSxcbiAgYWRkQ2FyZExpa2UsXG4gIHVwZGF0ZVVzZXJBdmF0YXJcbn07XG4iLCJleHBvcnQgZGVmYXVsdCB7XG4gIGRlbGV0ZTogKCkgPT4ge30sXG59XG4iLCJpbXBvcnQgeyBvcGVuUG9wdXAsIGhhbmRsZVN1Ym1pdCB9IGZyb20gJy4vcG9wdXAuanMnO1xuaW1wb3J0IHsgUE9QVVAsIENBUkQsIEVWRU5UIH0gZnJvbSAnLi9lbnVtLmpzJztcbmltcG9ydCB7IGFkZENhcmRMaWtlLCBkZWxldGVDYXJkTGlrZSwgcmVtb3ZlQ2FyZCB9IGZyb20gJy4vYXBpLmpzJztcbmltcG9ydCBkZWxldGVDYXJkU2VydmljZSBmcm9tICcuL2RlbGV0ZUNhcmRTZXJ2aWNlLmpzJztcblxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihDQVJELlRFTVBMQVRFKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoQ0FSRC5JVEVNKTtcbmNvbnN0IGNhcmRzV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoQ0FSRC5XUkFQUEVSKTtcbmNvbnN0IHBvcHVwRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQT1BVUC5UWVBFX0RFTEVURSk7XG5jb25zdCBwb3B1cFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQT1BVUC5UWVBFX1BIT1RPKTtcbmNvbnN0IHBvcHVwSW1hZ2UgPSBwb3B1cFBob3RvLnF1ZXJ5U2VsZWN0b3IoUE9QVVAuSU1BR0UpO1xuY29uc3QgcG9wdXBUaXRsZSA9IHBvcHVwUGhvdG8ucXVlcnlTZWxlY3RvcihQT1BVUC5USVRMRSk7XG5sZXQgaGFzT3duZXJMaWtlO1xuY29uc3QgY2FyZHMgPSBbXTtcblxuY29uc3Qgc2V0Q2FyZE5hbWUgPSAoZWwsIHRpdGxlKSA9PiB7XG4gIGVsLnRleHRDb250ZW50ID0gdGl0bGU7XG59O1xuXG5jb25zdCBzZXRDYXJkSW1hZ2UgPSAoZWwsIHRpdGxlLCBpbWFnZSkgPT4ge1xuICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGltYWdlKTtcbiAgZWwuc2V0QXR0cmlidXRlKCdhbHQnLCB0aXRsZSk7XG59O1xuXG5jb25zdCBhZGRMaWtlQWN0aXZlQ2xhc3MgPSAoZWwpID0+IHtcbiAgZWwuY2xhc3NMaXN0LmFkZChDQVJELkxJS0VfQlVUVE9OX0FDVElWRSk7XG4gIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICfQo9Cx0YDQsNGC0Ywg0L7RgtC80LXRgtC60YMgXFxcItCf0L7QvdGA0LDQstC40LvQvtGB0YxcXFwiJyk7XG59O1xuXG5jb25zdCByZW1vdmVMaWtlQWN0aXZlQ2xhc3MgPSAoZWwpID0+IHtcbiAgZWwuY2xhc3NMaXN0LnJlbW92ZShDQVJELkxJS0VfQlVUVE9OX0FDVElWRSk7XG4gIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICfQlNC+0LHQsNCy0LjRgtGMINC+0YLQvNC10YLQutGDIFxcXCLQn9C+0L3RgNCw0LLQuNC70L7RgdGMXFxcIicpO1xufTtcblxuY29uc3QgdG9nZ2xlTGlrZSA9IChlbCwgaGFzQWN0aXZlQ2xhc3MpID0+IHtcbiAgc3dpdGNoIChoYXNBY3RpdmVDbGFzcykge1xuICAgIGNhc2UgdHJ1ZTpcbiAgICAgIHJlbW92ZUxpa2VBY3RpdmVDbGFzcyhlbCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIGZhbHNlOlxuICAgICAgYWRkTGlrZUFjdGl2ZUNsYXNzKGVsKTtcbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG5jb25zdCBjaGVja0xpa2VCdXR0b25BY3RpdmVDbGFzcyA9IChlbCkgPT4ge1xuICByZXR1cm4gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKENBUkQuTElLRV9CVVRUT05fQUNUSVZFKTtcbn07XG5cbmNvbnN0IHNldENhcmRMaWtlcyA9IChidXR0b24sIG51bWJlciwgdmFsdWUgPSAwKSA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInKSBjb25zb2xlLmVycm9yKCfQl9C90LDRh9C10L3QuNC1INC60L7Qu9C40YfQtdGB0YLQstCwINC70LDQudC60L7QsiDQutCw0YDRgtC+0YfQutC4INC00L7Qu9C20L3QviDQsdGL0YLRjCDRh9C40YHQu9C+0LwnKTtcbiAgc3dpdGNoICh2YWx1ZSkge1xuICAgIGNhc2UgMDpcbiAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKENBUkQuTElLRV9CVVRUT05fSVNfTElLRUQpO1xuICAgICAgbnVtYmVyLnRleHRDb250ZW50ID0gJyc7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoQ0FSRC5MSUtFX0JVVFRPTl9JU19MSUtFRCk7XG4gICAgICBudW1iZXIudGV4dENvbnRlbnQgPSB2YWx1ZTtcbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG5jb25zdCB1cGRhdGVPd25lcnNMaWtlID0gKGxpa2VzQXJyYXksIHVzZXJJZCkgPT4ge1xuICBzd2l0Y2ggKGxpa2VzQXJyYXkubGVuZ3RoKSB7XG4gICAgY2FzZSAwOlxuICAgICAgaGFzT3duZXJMaWtlID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgaGFzT3duZXJMaWtlID0gbGlrZXNBcnJheS5zb21lKGxpa2UgPT4gbGlrZS5faWQgPT09IHVzZXJJZCk7XG4gICAgICBicmVhaztcbiAgfVxufTtcblxuY29uc3QgZmluZEN1cnJlbnRDYXJkID0gKGlkKSA9PiB7XG4gIHJldHVybiBjYXJkcy5maW5kKGNhcmQgPT4gY2FyZC5faWQgPT09IGlkKTtcbn07XG5cbmNvbnN0IGhhbmRsZUxpa2VCdXR0b24gPSAoYnV0dG9uLCBudW1iZXIsIGlkLCBpbml0aWFsTGlrZXMsIHVzZXJJZCkgPT4ge1xuICBjb25zdCBjdXJyZW50ID0gZmluZEN1cnJlbnRDYXJkKGlkKTtcbiAgdXBkYXRlT3duZXJzTGlrZShjdXJyZW50Lmxpa2VzLCB1c2VySWQpO1xuICBidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICBzd2l0Y2ggKGhhc093bmVyTGlrZSkge1xuICAgIGNhc2UgdHJ1ZTpcbiAgICAgIGRlbGV0ZUNhcmRMaWtlKGlkKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgdXBkYXRlT3duZXJzTGlrZShyZXMubGlrZXMsIHVzZXJJZCk7XG4gICAgICAgICAgLyogLSDQn9C+0L3QuNC80LDRjiwg0YfRgtC+INGA0LXRiNC10L3QuNC1INC80YPRgtC40YDQvtCy0LDRgtGMINC40YHRhdC+0LTQvdGL0Lkg0LzQsNGB0YHQuNCyIC0g0L3QtSDQu9GD0YfRiNC10LUsINC90L4g0Y8g0L3QtSDQt9C90LDRjiDQutCw0Log0LXRidC1INC80L7QttC90L4g0YXRgNCw0L3QuNGC0Ywg0LjQvdGE0L7RgNC80LDRhtC40Y4g0LrQsNC20LTQvtC5INC60LDRgNGC0L7Rh9C60Lgg0LHQtdC3INGB0YLQvtGA0LAg0LjQu9C4INC60LvQsNGB0YHQvtCyLlxuICAgICAgICAgICogLSDQndC1INC/0L7QvdGP0Lsg0YfRgtC+INC40LzQtdC10YLRgdGPINCy0LLQuNC00YMgXCLQvdCw0LTQviDQsdGL0LvQviDQstC90YPRgtGA0Lgg0YTRg9C90LrRhtC40LggY3JlYXRlQ2FyZCDRjdGC0L4g0LLRgdC1INC/0YDQvtC/0LjRgdCw0YLRjCwg0YfRgtC+0LHRiyDQuNC80LXRgtGMINC00L7RgdGC0YPQvyDQuiDQvtCx0YrQtdC60YLRgyDQutCw0YDRgtC+0YfQutC4INC/0YDQuCDRgdC+0LfQtNCw0L3QuNC4INC10LUuINCi0L7Qs9C00LAg0LHRiyDQv9GA0L7RgdGC0L4g0LzQtdC90Y/Qu9C4INC60L7Quy3QstC+INC70LDQudC60L7QsiDRgtCw0Lwg0LbQtSAo0L/QtdGA0LXQvdCw0LfQvdCw0YfQsNGPINC/0LXRgNC10LzQtdC90L3Rg9GOKVwiXG4gICAgICAgICAgKiAtINCV0YHQu9C4INGPINC/0YDQvtC/0LjRiNGDINC/0L7Qu9GPINCyINGE0YPQvdC60YbQuNC4IGNyZWF0ZUNhcmQg0L7QvdC4INCx0YPQtNGD0YIg0L7RgtGA0LDQsdCw0YLRi9Cy0LDRgtGMINGC0L7Qu9GM0LrQviDQvtC00LjQvSDRgNCw0Lcg0L/RgNC4INGB0L7Qt9C00LDQvdC40Lgg0LrQsNGA0YLQvtGH0LrQuCwgKyDQutCw0Log0LjRhSDQvNC10L3Rj9GC0YwsINGC0YPRgiDQstC10LTRjCDQvdC10YIg0LTQvtGB0YLRg9C/0LAg0Log0YHQutC+0YPQv9GDINGE0YPQvdC60YbQuNC4IGNyZWF0ZUNhcmQuICovXG4gICAgICAgICAgY3VycmVudC5saWtlcyA9IHJlcy5saWtlcztcbiAgICAgICAgICBzZXRDYXJkTGlrZXMoYnV0dG9uLCBudW1iZXIsIHJlcy5saWtlcy5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IGhhc0FjdGl2ZUNsYXNzID0gY2hlY2tMaWtlQnV0dG9uQWN0aXZlQ2xhc3MoYnV0dG9uKTtcbiAgICAgICAgICB0b2dnbGVMaWtlKGJ1dHRvbiwgaGFzQWN0aXZlQ2xhc3MpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAgJHtlcnJvci5zdGF0dXN9INGD0LTQsNC70LXQvdC40Y8g0LvQsNC50LrQsCDQutCw0YDRgtC+0YfQutC4OiAke2Vycm9yLnN0YXR1c1RleHR9YCkpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJykpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBmYWxzZTpcbiAgICAgIGFkZENhcmRMaWtlKGlkKVxuICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgdXBkYXRlT3duZXJzTGlrZShyZXMubGlrZXMsIHVzZXJJZCk7XG4gICAgICAgICAgY3VycmVudC5saWtlcyA9IHJlcy5saWtlcztcbiAgICAgICAgICBzZXRDYXJkTGlrZXMoYnV0dG9uLCBudW1iZXIsIHJlcy5saWtlcy5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IGhhc0FjdGl2ZUNsYXNzID0gY2hlY2tMaWtlQnV0dG9uQWN0aXZlQ2xhc3MoYnV0dG9uKTtcbiAgICAgICAgICB0b2dnbGVMaWtlKGJ1dHRvbiwgaGFzQWN0aXZlQ2xhc3MpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAgJHtlcnJvci5zdGF0dXN9INC00L7QsdCw0LLQu9C10L3QuNGPINC70LDQudC60LAg0LrQsNGA0YLQvtGH0LrQuDogJHtlcnJvci5zdGF0dXNUZXh0fWApKVxuICAgICAgICAuZmluYWxseSgoKSA9PiBidXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpKTtcbiAgICAgIGJyZWFrO1xuICB9XG59O1xuXG5jb25zdCBoYW5kbGVQaG90b092ZXJsYXkgPSAoY2FyZEltYWdlLCBjYXJkVGl0bGUpID0+IHtcbiAgb3BlblBvcHVwKHBvcHVwUGhvdG8pO1xuICBwb3B1cFRpdGxlLnRleHRDb250ZW50ID0gY2FyZFRpdGxlLnRleHRDb250ZW50O1xuICBwb3B1cEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgY2FyZEltYWdlLmdldEF0dHJpYnV0ZSgnc3JjJykpO1xuICBwb3B1cEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgY2FyZEltYWdlLmdldEF0dHJpYnV0ZSgnYWx0JykpO1xufTtcblxuY29uc3QgaGFuZGxlRGVsZXRlQnV0dG9uID0gKHRhcmdldCwgY2FyZElkKSA9PiB7XG4gIGRlbGV0ZUNhcmRTZXJ2aWNlLmRlbGV0ZSA9IChlKSA9PiBoYW5kbGVEZWxldGVTdWJtaXQoZSwgdGFyZ2V0LCBjYXJkSWQpO1xuICBvcGVuUG9wdXAocG9wdXBEZWxldGUpO1xufTtcblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlU3VibWl0KGUsIHRhcmdldCwgY2FyZElkKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoQ0FSRC5JVEVNKTtcblxuICBjb25zdCBzdWJtaXREZWxldGVDYXJkUmVxdWVzdCA9ICgpID0+IHtcbiAgICByZXR1cm4gcmVtb3ZlQ2FyZChjYXJkSWQpXG4gICAgICAudGhlbigoKSA9PiBjYXJkRWxlbWVudC5yZW1vdmUoKSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCAke2Vycm9yLnN0YXR1c30g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQv9GA0L7RhNC40LvRjzogJHtlcnJvci5zdGF0dXNUZXh0fWApKTtcbiAgfTtcblxuICBoYW5kbGVTdWJtaXQoc3VibWl0RGVsZXRlQ2FyZFJlcXVlc3QsIGUpO1xufVxuXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmQsIHVzZXJJZCkgPT4ge1xuICBjb25zdCBjYXJkSXRlbSA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRBcnRpY2xlID0gY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihDQVJELkFSVElDTEUpO1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkQXJ0aWNsZS5xdWVyeVNlbGVjdG9yKENBUkQuSU1BR0UpO1xuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkQXJ0aWNsZS5xdWVyeVNlbGVjdG9yKENBUkQuVElUTEUpO1xuICBjb25zdCBjYXJkTGlrZU51bWJlciA9IGNhcmRBcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoQ0FSRC5MSUtFX05VTUJFUik7XG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZEFydGljbGUucXVlcnlTZWxlY3RvcihDQVJELkxJS0VfQlVUVE9OKTtcbiAgY29uc3QgY2FyZERlbGV0ZSA9IGNhcmRBcnRpY2xlLnF1ZXJ5U2VsZWN0b3IoQ0FSRC5ERUxFVEUpO1xuICBjb25zdCBjYXJkTGlrZXNEZWZhdWx0VmFsdWUgPSAwO1xuICBjb25zdCBsaWtlc0NvdW50ID0gY2FyZC5saWtlcy5sZW5ndGggPiAwID8gY2FyZC5saWtlcy5sZW5ndGggOiBjYXJkTGlrZXNEZWZhdWx0VmFsdWU7XG4gIGNhcmRzLnB1c2goY2FyZCk7XG5cbiAgdXBkYXRlT3duZXJzTGlrZShjYXJkLmxpa2VzLCB1c2VySWQpO1xuICBzZXRDYXJkTmFtZShjYXJkVGl0bGUsIGNhcmQubmFtZSk7XG4gIHNldENhcmRJbWFnZShjYXJkSW1hZ2UsIGNhcmQubmFtZSwgY2FyZC5saW5rKTtcbiAgc2V0Q2FyZExpa2VzKGNhcmRMaWtlQnV0dG9uLCBjYXJkTGlrZU51bWJlciwgbGlrZXNDb3VudCk7XG4gIGhhc093bmVyTGlrZVxuICAgID8gYWRkTGlrZUFjdGl2ZUNsYXNzKGNhcmRMaWtlQnV0dG9uKVxuICAgIDogcmVtb3ZlTGlrZUFjdGl2ZUNsYXNzKGNhcmRMaWtlQnV0dG9uKTtcblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk1PVVNFRE9XTiwgKCkgPT4gaGFuZGxlTGlrZUJ1dHRvbihjYXJkTGlrZUJ1dHRvbiwgY2FyZExpa2VOdW1iZXIsIGNhcmQuX2lkLCBjYXJkLmxpa2VzLCB1c2VySWQpKTtcbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTU9VU0VET1dOLCAoKSA9PiBoYW5kbGVQaG90b092ZXJsYXkoY2FyZEltYWdlLCBjYXJkVGl0bGUpKTtcbiAgY2FyZC5vd25lci5faWQgPT09IHVzZXJJZFxuICAgID8gY2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk1PVVNFRE9XTiwgKHsgdGFyZ2V0IH0pID0+IGhhbmRsZURlbGV0ZUJ1dHRvbih0YXJnZXQsIGNhcmQuX2lkKSlcbiAgICA6IGNhcmREZWxldGUucmVtb3ZlKCk7XG5cbiAgcmV0dXJuIGNhcmRJdGVtO1xufTtcblxuY29uc3QgcHJlcGVuZENhcmQgPSAoY2FyZCkgPT4ge1xuICBjYXJkc1dyYXBwZXIucHJlcGVuZChjYXJkKTtcbn07XG5cbmV4cG9ydCB7XG4gIGNyZWF0ZUNhcmQsXG4gIHByZXBlbmRDYXJkXG59O1xuIiwiaW1wb3J0IHsgb3BlblBvcHVwLCBoYW5kbGVTdWJtaXQgfSBmcm9tICcuL3BvcHVwLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhcmQsIHByZXBlbmRDYXJkIH0gZnJvbSAnLi9jYXJkLmpzJztcbmltcG9ydCB7IFBST0ZJTEUsIFBPUFVQLCBGT1JNLCBFVkVOVCB9IGZyb20gJy4vZW51bS5qcyc7XG5pbXBvcnQgeyB1cGRhdGVVc2VyLCBhZGRDYXJkLCB1cGRhdGVVc2VyQXZhdGFyIH0gZnJvbSAnLi9hcGkuanMnO1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUE9QVVAuVFlQRV9BVkFUQVIpO1xuY29uc3QgYXZhdGFyUG9wdXBPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQUk9GSUxFLkFWQVRBUik7XG5jb25zdCBhdmF0YXJQb3B1cEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tGT1JNLk5BTUVfQVZBVEFSXTtcbmNvbnN0IGF2YXRhclBvcHVwTGlua0lucHV0ID0gYXZhdGFyUG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoRk9STS5JTlBVVF9MSU5LKTtcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUE9QVVAuVFlQRV9QUk9GSUxFKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQUk9GSUxFLkNPTlRFTlRfTkFNRSk7XG5jb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQUk9GSUxFLkNPTlRFTlRfQVZBVEFSKTtcbmNvbnN0IHByb2ZpbGVPY2N1cGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQUk9GSUxFLkNPTlRFTlRfT0NDVVBBVElPTik7XG5jb25zdCBwcm9maWxlUG9wdXBPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQUk9GSUxFLkJVVFRPTl9FRElUX1BST0ZJTEUpO1xuY29uc3QgcHJvZmlsZVBvcHVwRm9ybSA9IGRvY3VtZW50LmZvcm1zW0ZPUk0uTkFNRV9QUk9GSUxFXTtcbmNvbnN0IHByb2ZpbGVQb3B1cE5hbWVJbnB1dCA9IHByb2ZpbGVQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihGT1JNLklOUFVUX05BTUUpO1xuY29uc3QgcHJvZmlsZVBvcHVwT2NjdXBhdGlvbklucHV0ID0gcHJvZmlsZVBvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKEZPUk0uSU5QVVRfT0NDVVBBVElPTik7XG5jb25zdCBjYXJkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBPUFVQLlRZUEVfQ0FSRCk7XG5jb25zdCBjYXJkUG9wdXBPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQUk9GSUxFLkJVVFRPTl9BRERfQ0FSRCk7XG5jb25zdCBjYXJkUG9wdXBGb3JtID0gZG9jdW1lbnQuZm9ybXNbRk9STS5OQU1FX0NBUkRdO1xuY29uc3QgY2FyZFBvcHVwVGl0bGVJbnB1dCA9IGNhcmRQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihGT1JNLklOUFVUX1RJVExFKTtcbmNvbnN0IGNhcmRQb3B1cExpbmtJbnB1dCA9IGNhcmRQb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihGT1JNLklOUFVUX0xJTkspO1xuXG5jb25zdCBmaWxsUHJvZmlsZUlucHV0cyA9ICgpID0+IHtcbiAgcHJvZmlsZVBvcHVwTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWUudGV4dENvbnRlbnQ7XG4gIHByb2ZpbGVQb3B1cE9jY3VwYXRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVPY2N1cGF0aW9uLnRleHRDb250ZW50O1xufTtcblxuY29uc3Qgc2V0UHJvZmlsZUF2YXRhciA9IChzcmMpID0+IHtcbiAgcHJvZmlsZUF2YXRhci5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYyk7XG59O1xuXG5jb25zdCBzZXRQcm9maWxlTmFtZSA9IChuYW1lKSA9PiB7XG4gIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbn07XG5cbmNvbnN0IHNldFByb2ZpbGVPY2N1cGF0aW9uID0gKG9jY3VwYXRpb24pID0+IHtcbiAgcHJvZmlsZU9jY3VwYXRpb24udGV4dENvbnRlbnQgPSBvY2N1cGF0aW9uO1xufTtcblxuY29uc3QgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCA9IChlKSA9PiB7XG4gIGNvbnN0IHN1Ym1pdEF2YXRhclJlcXVlc3QgPSAoKSA9PiB7XG4gICAgY29uc3QgYXZhdGFyID0gYXZhdGFyUG9wdXBMaW5rSW5wdXQudmFsdWU7XG4gICAgcmV0dXJuIHVwZGF0ZVVzZXJBdmF0YXIoYXZhdGFyKVxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICAgIHNldFByb2ZpbGVBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAgJHtlcnJvci5zdGF0dXN9INC40LfQvNC10L3QtdC90LjRjyDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y86ICR7ZXJyb3Iuc3RhdHVzVGV4dH1gKSk7XG4gIH07XG4gIGhhbmRsZVN1Ym1pdChzdWJtaXRBdmF0YXJSZXF1ZXN0LCBlKTtcbn07XG5cbmNvbnN0IGhhbmRsZU9wZW5BdmF0YXIgPSAoKSA9PiB7XG4gIG9wZW5Qb3B1cChhdmF0YXJQb3B1cCk7XG59O1xuXG5jb25zdCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCA9IChlKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSB7IG5hbWU6IHByb2ZpbGVQb3B1cE5hbWVJbnB1dC52YWx1ZSwgYWJvdXQ6IHByb2ZpbGVQb3B1cE9jY3VwYXRpb25JbnB1dC52YWx1ZSB9O1xuICBjb25zdCBzdWJtaXRQcm9maWxlUmVxdWVzdCA9ICgpID0+IHtcbiAgICByZXR1cm4gdXBkYXRlVXNlcih1c2VyKVxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICAgIHNldFByb2ZpbGVOYW1lKHVzZXJEYXRhLm5hbWUpO1xuICAgICAgICBzZXRQcm9maWxlT2NjdXBhdGlvbih1c2VyRGF0YS5hYm91dCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwICR7ZXJyb3Iuc3RhdHVzfSDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC40L3RhNC+0YDQvNCw0YbQuNC4INC/0YDQvtGE0LjQu9GPOiAke2Vycm9yLnN0YXR1c1RleHR9YCkpO1xuICB9O1xuICBoYW5kbGVTdWJtaXQoc3VibWl0UHJvZmlsZVJlcXVlc3QsIGUpO1xufTtcblxuY29uc3QgaGFuZGxlT3BlblByb2ZpbGUgPSAoKSA9PiB7XG4gIG9wZW5Qb3B1cChwcm9maWxlUG9wdXApO1xuICBmaWxsUHJvZmlsZUlucHV0cygpO1xufTtcblxuY29uc3QgaGFuZGxlQ2FyZEZvcm1TdWJtaXQgPSAoZSkgPT4ge1xuICBjb25zdCBzdWJtaXRQcm9maWxlUmVxdWVzdCA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkID0geyBuYW1lOiBjYXJkUG9wdXBUaXRsZUlucHV0LnZhbHVlLCBsaW5rOiBjYXJkUG9wdXBMaW5rSW5wdXQudmFsdWUgfTtcbiAgICByZXR1cm4gYWRkQ2FyZChjYXJkKVxuICAgICAgLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZENsb25lID0gY3JlYXRlQ2FyZChjYXJkLCBjYXJkLm93bmVyLl9pZCk7XG4gICAgICAgIHByZXBlbmRDYXJkKGNhcmRDbG9uZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwICR7ZXJyb3Iuc3RhdHVzfSBj0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuDogJHtlcnJvci5zdGF0dXNUZXh0fWApKTtcbiAgfTtcbiAgaGFuZGxlU3VibWl0KHN1Ym1pdFByb2ZpbGVSZXF1ZXN0LCBlKTtcbn07XG5cbmNvbnN0IGhhbmRsZUNhcmRQb3B1cE9wZW5CdXR0b24gPSAoKSA9PiB7XG4gIG9wZW5Qb3B1cChjYXJkUG9wdXApO1xufTtcblxuY29uc3QgYWRkUHJvZmlsZUxpc3RlbmVycyA9ICgpID0+IHtcbiAgY2FyZFBvcHVwT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNMSUNLLCBoYW5kbGVDYXJkUG9wdXBPcGVuQnV0dG9uKTtcbiAgY2FyZFBvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlNVQk1JVCwgaGFuZGxlQ2FyZEZvcm1TdWJtaXQpO1xuICBwcm9maWxlUG9wdXBPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ0xJQ0ssIGhhbmRsZU9wZW5Qcm9maWxlKTtcbiAgcHJvZmlsZVBvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlNVQk1JVCwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuICBhdmF0YXJQb3B1cE9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DTElDSywgaGFuZGxlT3BlbkF2YXRhcik7XG4gIGF2YXRhclBvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlNVQk1JVCwgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCk7XG59O1xuXG5leHBvcnQge1xuICBhZGRQcm9maWxlTGlzdGVuZXJzLFxuICBzZXRQcm9maWxlQXZhdGFyLFxuICBzZXRQcm9maWxlTmFtZSxcbiAgc2V0UHJvZmlsZU9jY3VwYXRpb25cbn07XG4iLCJjb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvckVsZW1lbnQsIGVycm9yTWVzc2FnZSwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckFjdGl2ZUNsYXNzKSA9PiB7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JBY3RpdmVDbGFzcyk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XG4gIGlucHV0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLCBgJHtlcnJvckFjdGl2ZUNsYXNzfWApO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQWN0aXZlQ2xhc3MpID0+IHtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JBY3RpdmVDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xuICBpbnB1dEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5Jyk7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JDbGFzcywgaW5wdXRFcnJvckNsYXNzLCBlcnJvckFjdGl2ZUNsYXNzKSA9PiB7XG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGlucHV0RWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoZXJyb3JDbGFzcyk7XG5cbiAgaW5wdXRFbGVtZW50LnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaFxuICAgID8gaW5wdXRFbGVtZW50LnNldEN1c3RvbVZhbGlkaXR5KGlucHV0RWxlbWVudC5kYXRhc2V0LmludmFsaWRNZXNzYWdlKVxuICAgIDogaW5wdXRFbGVtZW50LnNldEN1c3RvbVZhbGlkaXR5KCcnKTtcblxuICAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgPyBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvckVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckFjdGl2ZUNsYXNzKVxuICAgIDogaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JFbGVtZW50LCBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQWN0aXZlQ2xhc3MpO1xufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0c0xpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0c0xpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgfVxufTtcblxuY29uc3Qgc2V0Rm9ybUV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBpbnB1dFNlbGVjdG9yLCBidXR0b25TZWxlY3RvciwgZXJyb3JTZWxlY3RvciwgaW5wdXRFcnJvckNsYXNzLCBidXR0b25JbmFjdGl2ZUNsYXNzLCBlcnJvckFjdGl2ZUNsYXNzKSA9PiB7XG4gIGNvbnN0IGlucHV0c0xpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25TZWxlY3Rvcik7XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0c0xpc3QsIGJ1dHRvbkVsZW1lbnQsIGJ1dHRvbkluYWN0aXZlQ2xhc3MpO1xuICBpbnB1dHNMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JTZWxlY3RvciwgaW5wdXRFcnJvckNsYXNzLCBlcnJvckFjdGl2ZUNsYXNzKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0c0xpc3QsIGJ1dHRvbkVsZW1lbnQsIGJ1dHRvbkluYWN0aXZlQ2xhc3MpO1xuICAgIH0pO1xuICB9KTtcbiAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCAoKSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dHNMaXN0LCBidXR0b25FbGVtZW50LCBidXR0b25JbmFjdGl2ZUNsYXNzKSwgMCk7XG4gIH0pO1xufTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1zTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uQ29uZmlnLmZvcm1TZWxlY3RvcikpO1xuICBmb3Jtc0xpc3QuZm9yRWFjaChmb3JtID0+IHNldEZvcm1FdmVudExpc3RlbmVycyhcbiAgICBmb3JtLFxuICAgIHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcixcbiAgICB2YWxpZGF0aW9uQ29uZmlnLmJ1dHRvblNlbGVjdG9yLFxuICAgIHZhbGlkYXRpb25Db25maWcuZXJyb3JTZWxlY3RvcixcbiAgICB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcyxcbiAgICB2YWxpZGF0aW9uQ29uZmlnLmJ1dHRvbkRpc2FibGVkQ2xhc3MsXG4gICAgdmFsaWRhdGlvbkNvbmZpZy5lcnJvckFjdGl2ZUNsYXNzLFxuICApKTtcbn07XG5cbmV4cG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb25cbn07XG4iLCJpbXBvcnQgeyBMT0FERVIsIFBST0ZJTEUgfSBmcm9tICcuL2VudW0uanMnO1xuXG5jb25zdCBsb2FkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKExPQURFUi5TRUxFQ1RPUik7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUFJPRklMRS5DT05URU5UX05BTUUpO1xuY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoUFJPRklMRS5BVkFUQVIpO1xuY29uc3QgcHJvZmlsZU9jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFBST0ZJTEUuQ09OVEVOVF9PQ0NVUEFUSU9OKTtcblxuY29uc3Qgc3RhcnRMb2FkZXIgPSAoKSA9PiB7XG4gIGxvYWRlci5jbGFzc0xpc3QuYWRkKExPQURFUi5BQ1RJVkVfQ0xBU1MpO1xuICBwcm9maWxlTmFtZS5jbGFzc0xpc3QuYWRkKExPQURFUi5TS0VMRVRPTik7XG4gIHByb2ZpbGVOYW1lLmNsYXNzTGlzdC5hZGQoTE9BREVSLlNLRUxFVE9OX1RFWFQpO1xuICBwcm9maWxlQXZhdGFyLmNsYXNzTGlzdC5hZGQoTE9BREVSLlNLRUxFVE9OKTtcbiAgcHJvZmlsZU9jY3VwYXRpb24uY2xhc3NMaXN0LmFkZChMT0FERVIuU0tFTEVUT04pO1xuICBwcm9maWxlT2NjdXBhdGlvbi5jbGFzc0xpc3QuYWRkKExPQURFUi5TS0VMRVRPTl9URVhUKTtcbn07XG5cbmNvbnN0IGVuZExvYWRlciA9ICgpID0+IHtcbiAgbG9hZGVyLmNsYXNzTGlzdC5yZW1vdmUoTE9BREVSLkFDVElWRV9DTEFTUyk7XG4gIHByb2ZpbGVOYW1lLmNsYXNzTGlzdC5yZW1vdmUoTE9BREVSLlNLRUxFVE9OKTtcbiAgcHJvZmlsZU5hbWUuY2xhc3NMaXN0LnJlbW92ZShMT0FERVIuU0tFTEVUT05fVEVYVCk7XG4gIHByb2ZpbGVBdmF0YXIuY2xhc3NMaXN0LnJlbW92ZShMT0FERVIuU0tFTEVUT04pO1xuICBwcm9maWxlT2NjdXBhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKExPQURFUi5TS0VMRVRPTik7XG4gIHByb2ZpbGVPY2N1cGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoTE9BREVSLlNLRUxFVE9OX1RFWFQpO1xufTtcblxuXG5leHBvcnQge1xuICBzdGFydExvYWRlcixcbiAgZW5kTG9hZGVyXG59O1xuIiwiaW1wb3J0ICcuL3N0eWxlcy9wYWdlcy9pbmRleC5jc3MnO1xuaW1wb3J0IHsgRVZFTlQsIEZPUk0sIFZBTElEQVRJT04gfSBmcm9tICcuL2NvbXBvbmVudHMvZW51bS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYXJkLCBwcmVwZW5kQ2FyZCB9IGZyb20gJy4vY29tcG9uZW50cy9jYXJkLmpzJztcbmltcG9ydCB7IGFkZFByb2ZpbGVMaXN0ZW5lcnMsIHNldFByb2ZpbGVBdmF0YXIsIHNldFByb2ZpbGVOYW1lLCBzZXRQcm9maWxlT2NjdXBhdGlvbiB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9maWxlLmpzJztcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24gfSBmcm9tICcuL2NvbXBvbmVudHMvdmFsaWRhdGlvbi5qcyc7XG5pbXBvcnQgeyBnZXRVc2VyLCBnZXRDYXJkcyB9IGZyb20gJy4vY29tcG9uZW50cy9hcGkuanMnO1xuaW1wb3J0IHsgc3RhcnRMb2FkZXIsIGVuZExvYWRlciB9IGZyb20gJy4vY29tcG9uZW50cy9sb2FkZXIuanMnO1xuaW1wb3J0IGRlbGV0ZUNhcmRTZXJ2aWNlIGZyb20gJy4vY29tcG9uZW50cy9kZWxldGVDYXJkU2VydmljZS5qcyc7XG5cbmNvbnN0IGNhcmREZWxldGVQb3B1cEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tGT1JNLk5BTUVfREVMRVRFXTtcbmxldCB1c2VySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcklkJykgfHwgbnVsbDtcblxuYWRkUHJvZmlsZUxpc3RlbmVycygpO1xuY2FyZERlbGV0ZVBvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlNVQk1JVCwgKGUpID0+IGRlbGV0ZUNhcmRTZXJ2aWNlLmRlbGV0ZShlKSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oe1xuICBmb3JtU2VsZWN0b3I6IFZBTElEQVRJT04uRk9STV9TRUxFQ1RPUixcbiAgaW5wdXRTZWxlY3RvcjogVkFMSURBVElPTi5JTlBVVF9TRUxFQ1RPUixcbiAgYnV0dG9uU2VsZWN0b3I6IFZBTElEQVRJT04uQlVUVE9OX1NFTEVDVE9SLFxuICBlcnJvclNlbGVjdG9yOiBWQUxJREFUSU9OLkVSUk9SX1NFTEVDVE9SLFxuICBpbnB1dEVycm9yQ2xhc3M6IFZBTElEQVRJT04uSU5QVVRfRVJST1JfQ0xBU1MsXG4gIGJ1dHRvbkRpc2FibGVkQ2xhc3M6IFZBTElEQVRJT04uQlVUVE9OX0RJU0FCTEVEX0NMQVNTLFxuICBlcnJvckFjdGl2ZUNsYXNzOiBWQUxJREFUSU9OLkVSUk9SX0FDVElWRV9DTEFTU1xufSk7XG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgc3RhcnRMb2FkZXIoKTtcbiAgUHJvbWlzZS5hbGwoW2dldFVzZXIoKSwgZ2V0Q2FyZHMoKV0pXG4gICAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgICBzZXRQcm9maWxlQXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XG4gICAgICBzZXRQcm9maWxlTmFtZSh1c2VyRGF0YS5uYW1lKTtcbiAgICAgIHNldFByb2ZpbGVPY2N1cGF0aW9uKHVzZXJEYXRhLmFib3V0KTtcbiAgICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySWQnLCB1c2VySWQpO1xuICAgICAgY2FyZHNcbiAgICAgICAgLnJldmVyc2UoKVxuICAgICAgICAuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkQ2xvbmUgPSBjcmVhdGVDYXJkKGNhcmQsIHVzZXJJZCk7XG4gICAgICAgICAgcHJlcGVuZENhcmQoY2FyZENsb25lKTtcbiAgICAgICAgfSk7XG4gICAgICBlbmRMb2FkZXIoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCAke2Vycm9yLnN0YXR1c30g0L/QvtC70YPRh9C10L3QuNGPINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtS4gJHtlcnJvci5zdGF0dXNUZXh0fWApKTtcbn0pO1xuIl0sIm5hbWVzIjpbImNvbmZpZyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIkxPQURFUiIsIkVWRU5UIiwiUFJPRklMRSIsIlBPUFVQIiwiRk9STSIsIkNBUkQiLCJjbG9zZVBvcHVwIiwicG9wdXAiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZW1vdmVQb3B1cEFjdGl2ZUNsYXNzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZVBvcHVwTW91c2VFdmVudCIsImhhbmRsZVBvcHVwS2V5Ym9hcmRFdmVudCIsInJlbW92ZVBvcHVwRXZlbnRMaXN0ZW5lcnMiLCJlIiwidGFyZ2V0IiwiY2xvc2VzdCIsImNvbnRhaW5zIiwia2V5Iiwib3BlblBvcHVwIiwiYWRkIiwiYWRkUG9wdXBBY3RpdmVDbGFzcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRQb3B1cEV2ZW50TGlzdGVuZXJzIiwic2V0VGltZW91dCIsImZvY3VzIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImJ1dHRvbiIsImJ1dHRvblRleHQiLCJsb2FkaW5nVGV4dCIsInRleHRDb250ZW50IiwiaGFuZGxlU3VibWl0IiwicmVxdWVzdCIsInByZXZlbnREZWZhdWx0IiwicG9wdXBGb3JtU3VibWl0QnV0dG9uIiwic3VibWl0dGVyIiwidGhlbiIsInJlc2V0IiwiZmluYWxseSIsImNoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzVGV4dCIsInN0YXR1cyIsInVybCIsIm9wdGlvbnMiLCJjb21wdXRlZFVybCIsImZldGNoIiwiZGVsZXRlIiwiaGFzT3duZXJMaWtlIiwiY2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNhcmRzV3JhcHBlciIsInBvcHVwRGVsZXRlIiwicG9wdXBQaG90byIsInBvcHVwSW1hZ2UiLCJwb3B1cFRpdGxlIiwiY2FyZHMiLCJhZGRMaWtlQWN0aXZlQ2xhc3MiLCJlbCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUxpa2VBY3RpdmVDbGFzcyIsInRvZ2dsZUxpa2UiLCJoYXNBY3RpdmVDbGFzcyIsImNoZWNrTGlrZUJ1dHRvbkFjdGl2ZUNsYXNzIiwic2V0Q2FyZExpa2VzIiwibnVtYmVyIiwidmFsdWUiLCJjb25zb2xlIiwiZXJyb3IiLCJ1cGRhdGVPd25lcnNMaWtlIiwibGlrZXNBcnJheSIsInVzZXJJZCIsImxlbmd0aCIsInNvbWUiLCJsaWtlIiwiX2lkIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJ0aXRsZSIsImNhcmRJdGVtIiwiY2xvbmVOb2RlIiwiY2FyZEFydGljbGUiLCJjYXJkSW1hZ2UiLCJjYXJkVGl0bGUiLCJjYXJkTGlrZU51bWJlciIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZSIsImxpa2VzQ291bnQiLCJsaWtlcyIsInB1c2giLCJuYW1lIiwiaW1hZ2UiLCJzZXRDYXJkSW1hZ2UiLCJsaW5rIiwiaWQiLCJpbml0aWFsTGlrZXMiLCJjYXJkSWQiLCJjdXJyZW50IiwiZmluZCIsImZpbmRDdXJyZW50Q2FyZCIsIm1ldGhvZCIsImNhdGNoIiwicmVtb3ZlQXR0cmlidXRlIiwiYWRkQ2FyZExpa2UiLCJoYW5kbGVMaWtlQnV0dG9uIiwiZ2V0QXR0cmlidXRlIiwiaGFuZGxlUGhvdG9PdmVybGF5Iiwib3duZXIiLCJkZWxldGVDYXJkU2VydmljZSIsImNhcmRFbGVtZW50IiwicmVtb3ZlQ2FyZCIsImhhbmRsZURlbGV0ZVN1Ym1pdCIsImhhbmRsZURlbGV0ZUJ1dHRvbiIsInByZXBlbmRDYXJkIiwicHJlcGVuZCIsImF2YXRhclBvcHVwIiwiYXZhdGFyUG9wdXBPcGVuQnV0dG9uIiwiYXZhdGFyUG9wdXBGb3JtIiwiZm9ybXMiLCJhdmF0YXJQb3B1cExpbmtJbnB1dCIsInByb2ZpbGVQb3B1cCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUF2YXRhciIsInByb2ZpbGVPY2N1cGF0aW9uIiwicHJvZmlsZVBvcHVwT3BlbkJ1dHRvbiIsInByb2ZpbGVQb3B1cEZvcm0iLCJwcm9maWxlUG9wdXBOYW1lSW5wdXQiLCJwcm9maWxlUG9wdXBPY2N1cGF0aW9uSW5wdXQiLCJjYXJkUG9wdXAiLCJjYXJkUG9wdXBPcGVuQnV0dG9uIiwiY2FyZFBvcHVwRm9ybSIsImNhcmRQb3B1cFRpdGxlSW5wdXQiLCJjYXJkUG9wdXBMaW5rSW5wdXQiLCJzZXRQcm9maWxlQXZhdGFyIiwic3JjIiwic2V0UHJvZmlsZU5hbWUiLCJzZXRQcm9maWxlT2NjdXBhdGlvbiIsIm9jY3VwYXRpb24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsImxvYWRlciIsInZhbGlkYXRpb25Db25maWciLCJjYXJkRGVsZXRlUG9wdXBGb3JtIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZENsb25lIiwidXNlciIsImFib3V0IiwidXNlckRhdGEiLCJhdmF0YXIiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiYnV0dG9uU2VsZWN0b3IiLCJlcnJvclNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwiYnV0dG9uRGlzYWJsZWRDbGFzcyIsImVycm9yQWN0aXZlQ2xhc3MiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImZvcm0iLCJmb3JtRWxlbWVudCIsImJ1dHRvbkluYWN0aXZlQ2xhc3MiLCJpbnB1dHNMaXN0IiwiZXJyb3JDbGFzcyIsImVycm9yRWxlbWVudCIsInBhcmVudE5vZGUiLCJwYXR0ZXJuTWlzbWF0Y2giLCJzZXRDdXN0b21WYWxpZGl0eSIsImRhdGFzZXQiLCJpbnZhbGlkTWVzc2FnZSIsImhpZGVJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwic2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImFsbCIsInNldEl0ZW0iLCJyZXZlcnNlIl0sInNvdXJjZVJvb3QiOiIifQ==